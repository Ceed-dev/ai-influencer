# AI-Influencer - Context

This file maintains the complete project history for AI continuity.

## Project Purpose

Manage the complete AI influencer video production lifecycle: component management, video production planning, multi-platform analytics (YouTube Shorts / TikTok / Instagram Reels), and AI-driven improvement recommendations.

## Key IDs and Resources

| Resource | ID / URL |
|----------|----------|
| Master Spreadsheet | `1fI1s_KLcegpiACJYpmpNe9tnQmnZo2o8eHIXNV5SpPg` |
| Apps Script Project | `1nbGkujRb6PwtkVuxBh1Vb9NKIUFi_uBa8NbdPSEx_PoxREmyMUKivA0S` |
| Root Drive Folder (AI-Influencer) | `1KRQuZ4W7u5CXRamjvN4xmavfu-7TPb0X` |
| Web App Deployment URL | `https://script.google.com/macros/s/{DEPLOYMENT_ID}/exec` (created via `clasp deploy`) |
| GitHub Repository | `Ceed-dev/ai-influencer` (æ—§: `video-analytics-hub`) |

### Inventory Spreadsheet IDs (stored in Script Properties)

These are auto-generated by `setupCompleteSystem()` and stored in GAS Script Properties:
- `SCENARIOS_INVENTORY_ID`
- `MOTIONS_INVENTORY_ID`
- `CHARACTERS_INVENTORY_ID`
- `AUDIO_INVENTORY_ID`


## Session History

### 2026-02-06: Project Initialization (v1.0)

**What was done:**
- Created project folder structure
- Created initial documentation (README.md, ARCHITECTURE.md, CONTEXT.md)
- Defined GAS project structure with component breakdown
- Established Google Sheets schema for multi-platform metrics

**Key decisions:**
1. **GAS over GCP VM**: Chose Google Apps Script for simplicity and native Sheets integration
2. **video_uid linking**: Each video gets a unique ID to link across platforms
3. **CSV-first approach**: Platform APIs have severe limitations. CSV export is the primary data source

### 2026-02-06: Phase 2-5 Implementation (v1.0)

**What was done:**
- CSV parsers, normalizers, linkers, KPI engine, LLM analyzer, sheet writer
- 223 tests across 6 test suites
- n8n integration documentation
- Sample CSV files

### 2026-02-09: Complete v2.0 Rebuild

**Why v2.0 was needed:**
- v1.0 was analytics-only (CSV import and analysis). It had no concept of video production lifecycle, no component management, and no way to track which content elements contributed to performance.
- v2.0 adds the complete production loop: component inventories, production workflow, approval gates, component-aware AI analysis, and performance scoring.

**What was done:**

- **Phase 1: Foundation**
  - `Config.gs` - Complete rewrite with Drive structure, master columns, component types, ID prefixes, KPI defaults, column aliases, dropdown options, colors
  - `Utils.gs` - Added readSheetAsObjects, findRowByColumn, findAllRowsByColumn, updateRowByIndex, ID generators (generateVideoUid, generateComponentId, generateScenarioId, generateMotionId, generateCharacterId, generateAudioId), getInventoryTypeFromId, getComponentById, getComponentsById
  - `Setup.gs` - One-click system setup: creates Drive folders (Scenarios/Motions/Characters/Audio/Analytics with subfolders), inventory spreadsheets (4 separate spreadsheets), all master sheet tabs, demo data, KPI defaults, formatting (dropdowns, conditional colors, checkbox)
  - `Migration.gs` - v1 to v2 migration (renames videos_master to master, adds new columns, creates video_analysis sheet, updates recommendations schema)

- **Phase 2: Data Layer**
  - `ComponentManager.gs` (NEW) - Component CRUD (addComponent, updateComponent, archiveComponent), listComponents with filters (type/status/tags), getTopPerformingComponents, buildVideoComponentContext, incrementComponentUsage, getComponentPerformanceHistory, buildRecommendationComponentPool
  - `MasterManager.gs` (NEW) - Master sheet operations (createProduction, getVideosByStatus, getApprovedVideos, getProductionData), production workflow (updateVideoStatus, approveVideo), updateMetricsSnapshot, writeAIRecommendations, updateAnalysisResults, getAllVideoUids, getMasterData
  - `ScoreUpdater.gs` (NEW) - updateAllComponentScores, calculateAvgScore, updateComponentScoresForVideo, updateSingleComponentScore, normalizeOverallScore, getScoreSummary

- **Phase 3: Analysis Extension**
  - `LLMAnalyzer.gs` - Rewritten with component-aware prompts (analyzWithLLMEnhanced), includes component history and top performers in AI context, generates component-specific recommendations via separate prompt, single-video analysis with component context
  - `Linker.gs` - Updated for v2.0 master sheet references, added updateMasterMetricsSnapshot
  - `KPIEngine.gs` - Added normalizeOverallScore for cross-platform scoring
  - `SheetWriter.gs` - Added writeToInventory, writeVideoAnalysis, writeRecommendationsEnhanced, clearAllData

- **Phase 4: Integration**
  - `Code.gs` - Complete rewrite with 13 API actions (doGet: get_status, get_approved, get_production, get_components, get_score_summary; doPost: import_csv, analyze, analyze_single, analyze_all, link_videos, create_production, approve_video, update_status, add_component, update_component, get_components, update_scores)
  - UI menu with submenus: Import CSV (YouTube/TikTok/Instagram), Analyze (Single/All), Production (Create/Approve/Status), Components (Add/Browse/Scores)

- **Phase 5: Testing**
  - 3 new test files: ComponentManager.test.js, MasterManager.test.js, ScoreUpdater.test.js
  - Updated all existing tests for v2.0 (master sheet references, removed scenario_cuts)
  - Updated setup.js with all v2.0 utility mocks
  - **330 tests passing across 9 test suites**

- **Phase 6: Documentation**
  - Updated all documentation for v2.0

**Key v2.0 decisions:**
1. **Separate inventory spreadsheets**: Each component type (scenarios, motions, characters, audio) has its own spreadsheet, accessed via `SpreadsheetApp.openById()`
2. **Component ID system**: Prefix-based (SCN_H_, SCN_B_, SCN_C_, MOT_, CHR_, AUD_) for type identification
3. **Production workflow**: draft -> approved -> in_production -> published -> analyzed, with human approval gate
4. **Component-aware AI analysis**: AI receives full component context (history, scores, top performers) when analyzing

### 2026-02-09: v2.0.1 - Checkbox Bug Fix

**Problem:** The `human_approved` checkbox column in the master sheet was causing `getLastRow()` to return 101 instead of 2 (or the actual data row count), because `requireCheckbox()` data validation auto-fills `FALSE` into empty cells, making them appear as data rows.

**Fix:** Changed `applyMasterSheetFormatting_()` to only apply checkbox validation to rows that have actual data (checked `sheet.getLastRow()` before applying), rather than applying to a range of 100 rows.

**Commit:** `62f7400 Fix insertDemoData false positive: checkbox FALSE values triggered data check`

### 2026-02-09: v2.0.2 - appendRow Bug Fix

**Problem:** Because of the checkbox FALSE values filling up to row 101, `sheet.appendRow()` was writing new data at row 102 instead of the next available row after actual data.

**Fix:** Updated `insertDemoData()` to clear any existing rows (including checkbox FALSE values) before writing demo data, and then apply checkbox validation only to the data rows.

**Commit:** `4c36712 Fix checkbox causing appendRow to write at row 101 instead of row 2`

### 2026-02-09: v2.0.3 - Config Sheet Fallback for API Keys

**Problem:** Setting Script Properties via the Apps Script editor is cumbersome, especially for the OpenAI API key. The `_config` sheet in the spreadsheet provides a more accessible way to store configuration.

**What changed:**
- `Config.gs`: Added `getConfigFromSheet_()` function that reads from a `_config` sheet (columns: key, value, description) as a fallback when Script Properties are not set
- `Config.gs`: Added `migrateConfigToProperties()` to migrate _config sheet values to Script Properties
- `OPENAI_API_KEY` now reads from Script Properties first, then falls back to `_config` sheet

### 2026-02-09: v2.0.4 - Web App Access Configuration

**Problem:** The Web App was not accessible externally because `appsscript.json` had `oauthScopes` configured (for bound script) but no `webapp` section. The webapp needed to be accessible without authentication for n8n integration.

**What changed:**
- `appsscript.json`: Replaced `oauthScopes` array with `webapp` configuration:
  ```json
  "webapp": {
    "access": "ANYONE_ANONYMOUS",
    "executeAs": "USER_DEPLOYING"
  }
  ```
- This allows anyone with the deployment URL to access the Web App endpoints
- OAuth scopes are inferred automatically by GAS for bound scripts

### 2026-02-09: OAuth Setup for Google Sheets/Drive API

**Purpose:** Enable Claude Code to directly read/write to Google Sheets and Drive for E2E testing and debugging.

**What was set up:**
- Created OAuth 2.0 credentials in Google Cloud Console (project: video-analytics-hub)
- Created `scripts/gsheet.py` CLI utility for direct Sheets/Drive API access
- Token stored in `.gsheets_token.json` (gitignored)
- OAuth client credentials in `video_analytics_hub_claude_code_oauth.json` (gitignored)
- MCP servers configured in `.mcp.json` for google-workspace and google-sheets integration (gitignored)

### 2026-02-09: E2E Testing Results

**End-to-end testing was performed against the live spreadsheet:**
- Confirmed all 9 sheet tabs exist with correct headers
- Confirmed master sheet has 3 demo videos (2 analyzed, 1 draft)
- Confirmed metrics sheets have data for analyzed videos
- Confirmed KPI targets are set with default values
- Confirmed component inventories are connected and populated with demo data
- All 330 unit tests pass

### 2026-02-09: LLM Analysis Execution (Live Test)

**Live test of the analysis pipeline was verified:**
- OpenAI API key configured via `_config` sheet (auto-migrated to Script Properties)
- `analyzeVideoSingle` and `analyzeAllVideosEnhanced` functions tested via GAS editor execution
- Analysis writes to `video_analysis` and `recommendations` sheets
- Component scores updated after analysis
- AI-recommended components written to `ai_next_*` columns

### 2026-02-09: MANUAL.md Creation

**Created comprehensive Japanese-language user manual (`MANUAL.md`):**
- Complete system overview with architecture diagrams (ASCII art)
- Detailed Google Drive data structure documentation
- All spreadsheet schemas with column descriptions
- Component management workflows
- Video production lifecycle documentation
- CSV import procedures for all 3 platforms
- Analysis and KPI explanation
- AI recommendation and approval flow
- n8n/API integration guide with all endpoint specifications
- GAS menu operation guide
- Troubleshooting section
- Initial setup instructions

### 2026-02-09: v2.1.0 - Documentation Update and .gitignore Hardening

**What was done:**
- Updated CONTEXT.md with complete project history
- Added `.mcp.json` and `tmp/` to `.gitignore` to prevent credential leaks
- Verified all documentation files are consistent with v2.0 codebase
- Committed, pushed, and deployed to Apps Script

### 2026-02-09: v3.0.0 - AI-Influencer Pipeline

**Why:** Pivot from analytics-only tool to a full content production pipeline. The existing GAS analytics (v2.0) handles post-publication analysis well, but the upstream workflow (video generation â†’ platform posting) was manual via n8n. This version adds an automated Node.js pipeline to handle end-to-end content production at scale (50 â†’ 700 accounts).

**What was done:**

- **Project restructure**: Renamed conceptually from "Video Analytics Hub" to "AI-Influencer" to reflect the broader scope
- **Created `pipeline/` directory** with modular Node.js architecture:
  - `pipeline/config.js` - Environment configuration and API key management
  - `pipeline/orchestrator.js` - Pipeline orchestration (scenario â†’ video â†’ post)
  - `pipeline/sheets/reader.js` - Google Sheets API reader (scenarios, accounts)
  - `pipeline/sheets/writer.js` - Google Sheets API writer (pipeline status, results)
  - `pipeline/media/kling.js` - fal.ai Kling video generation
  - `pipeline/media/tts.js` - fal.ai ElevenLabs TTS
  - `pipeline/media/lipsync.js` - fal.ai Lipsync processing
  - `pipeline/media/creatify.js` - Creatify video composition
  - `pipeline/storage/drive.js` - Google Drive upload/management
  - `pipeline/posting/youtube.js` - YouTube Data API v3 posting
  - `pipeline/posting/instagram.js` - Instagram Graph API posting
  - `pipeline/posting/tiktok.js` - TikTok Content Posting API
  - `pipeline/posting/x.js` - X/Twitter v2 API posting
- **Created `scripts/` entry points**:
  - `scripts/run-pipeline.js` - Single video pipeline execution
  - `scripts/run-daily.js` - Daily batch execution for all accounts
  - `scripts/collect-metrics.js` - Metrics collection from platforms
- **New Google Sheets tabs designed**:
  - `accounts` - Platform account management (account_id, platform, credentials_ref, status, daily limits)
  - `content_pipeline` - Pipeline execution log (pipeline_id, video_uid, account_id, job IDs, status, cost)
- **Documentation rewrite**:
  - `STRATEGY.md` (NEW) - Strategy, KPI targets, revenue model, meeting notes, decision log
  - `README.md` - Complete rewrite for AI-Influencer scope
  - `ARCHITECTURE.md` - Complete rewrite with Pipeline + Analytics architecture
  - `CONTEXT.md` - Appended this session

**Key decisions:**
1. **Node.js pipeline (not GAS)**: GAS has 6-minute timeout and can't handle long-running video generation. Node.js runs on local/server with no timeout constraints
2. **fal.ai as media hub**: Consolidates Kling, ElevenLabs, and Lipsync under one API provider
3. **Google Sheets as DB**: Continues using Sheets for simplicity and compatibility with existing GAS analytics
4. **YouTube first for MVP**: Most stable API, fastest path to revenue
5. **Existing GAS analytics unchanged**: The 14 GAS files and 330 tests remain untouched

**Phase plan:**
- Phase 1 (2/10-12): MVP - 1 account, YouTube auto-posting
- Phase 2 (2/13-17): 12 YouTube + 12 Instagram accounts
- Phase 3 (2/18-28): All 50 accounts across 4 platforms

### 2026-02-10: Phase 0 - Content Generation Pipeline Implementation

**Why:** The n8n workflow analysis revealed 5 critical differences between the existing pipeline code and the actual production workflow. The pipeline needed to be rewritten to match the real n8n flow exactly.

**What was done:**

- **n8n workflow analysis**: Analyzed `ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼.json` and `senario_template.xlsx` to extract the real 3-step process (Kling â†’ TTS â†’ Lipsync, no Creatify Aurora)
- **Created `pipeline/data/scenario.json`**: Extracted 3 sections (hook, body, cta) with scripts and motion reference video Drive IDs (`motionVideoDriveId`)
- **Fixed media module endpoints**:
  - `video-generator.js`: `image-to-video` â†’ `motion-control` with `video_url`, `character_orientation` (NO `prompt` or `keep_original_sound` â€” causes 422)
  - `tts-generator.js`: `tts/v3` â†’ `tts/eleven-v3` with voice name "Aria" instead of voice_id
  - `lipsync.js`: `v2` â†’ `v2/pro` with `sync_mode: "bounce"`
- **Added fal.storage upload**: `uploadToFalStorage()` and `downloadFromDrive()` in `fal-client.js` â€” replaces Cloudinary with Drive â†’ fal.storage â†’ API pattern
- **Created ffmpeg concat utility**: `pipeline/media/concat.js` using concat demuxer for combining 3 section videos
- **Rewrote orchestrator**: New 3-section loop â€” downloads motion video from Drive per section â†’ fal.storage â†’ Kling â†’ TTS â†’ Lipsync, then ffmpeg concat + Drive upload (4 files) + sheet logging
- **Rewrote CLI**: `--character-folder <DRIVE_FOLDER_ID>` replaces `--account`
- **Deleted Cloudinary and Compositor modules**: Removed `compositor.js`, `cloudinary.js`, cloudinary config and dependency
- **Updated content_pipeline sheet schema**: New columns (character_folder_id, section_count, hook/body/cta_video_url, drive_folder_id)
- **Updated content-manager.js**: HEADERS array matches new sheet schema
- **Created pipeline test suite**: 21 tests covering modules, endpoints, ffmpeg, CLI, schema, edge cases
- **Updated Jest config**: Projects-based config for both GAS and pipeline test suites
- **E2E success**: First full pipeline run completed â€” CNT_202602_2916 (54MB final video, 3 sections)
  - Uploaded CHR_0001_v1.jpg to `Characters/Images/CHR_0001/`
  - Fixed `FAL_KEY || FAL_AI_KEY` fallback in config.js
  - Replaced dead Cloudinary URLs in scenario.json with Drive file IDs (motionVideoDriveId)
  - Removed invalid `prompt: ''` and `keep_original_sound: true` params from video-generator
  - Output: `Productions/2026-02-10/CNT_202602_2916/` with 4 MP4 files uploaded to Drive
  - content_pipeline sheet updated with status=completed and all Drive links
- **README.md rewritten**: Comprehensive specification document with pipeline flow, service descriptions, Drive folder structure, all Sheets schemas with column-level documentation, setup, usage, cost structure

**Key decisions:**
1. **Creatify Aurora removed**: n8n workflow doesn't use it â€” the 3-step process (Kling â†’ TTS â†’ Lipsync) is sufficient
2. **Cloudinary â†’ fal.storage**: All persistent files in Drive, temporary URLs via fal.storage. No external image hosting needed
3. **3-section structure**: Each video consists of hook + body + cta, processed independently then concatenated
4. **ffmpeg for concatenation**: Simple `concat demuxer` with `-c copy` (no re-encoding) for fast joining
5. **Drive folder structure**: Productions/YYYY-MM-DD/CNT_XXXX/ with 4 files per content
6. **Motion videos from Drive**: scenario.json stores Drive file IDs (not URLs), orchestrator downloads + uploads to fal.storage per section

**Test results:** 357 tests passing (330 GAS + 27 pipeline)

### 2026-02-10: v4.0 - Production Rebuild

**Why:** Phase 0 proved the E2E pipeline works, but it relied on demo data and sequential processing. To hit the 36 videos/day target for 50 accounts by February, the system needed: (1) real data in all inventories, (2) parallel processing for speed, (3) proper inventory management modules, and (4) a production-grade tracking tab.

**What was done:**

- **Demo data â†’ real data migration**:
  - Cleared all demo data from 4 inventory spreadsheets (Scenarios, Motions, Characters, Audio)
  - Populated inventories with real data from ãƒ†ãƒ³ãƒ—ãƒ¬.xlsx
  - Uploaded 3 motion videos to Drive (Hooks/Bodies/CTAs folders)

- **Accounts Inventory** (new spreadsheet):
  - 7 platform accounts configured
  - 12 Gmail credentials registered

- **Production tab** (new, 33 columns):
  - Replaces content_pipeline for new pipeline runs
  - Tracks video_id, all inventory IDs used, scripts, output URLs, processing time, cost, error details
  - content_pipeline tab preserved for backward compatibility (v3.1 records remain)

- **New pipeline modules**:
  - `pipeline/sheets/inventory-reader.js`: Reads from all 4 inventory spreadsheets, resolves component IDs to Drive file IDs and metadata
  - `pipeline/sheets/production-manager.js`: Creates/updates rows in the production tab, manages status transitions

- **Orchestrator parallelization** (`pipeline/orchestrator.js` rewrite):
  - 3 sections now processed in parallel via `Promise.all`
  - Within each section, Kling video generation and TTS run in parallel
  - Only Lipsync runs sequentially (requires both video and audio as input)
  - Processing time reduced from ~35min to ~12min per video

- **CLI update** (`scripts/run-pipeline.js`):
  - New flags: `--video-id <ID>`, `--limit <N>`
  - `--character-folder` deprecated (still works for backward compatibility)
  - Pipeline reads from inventory sheets instead of scenario.json

- **Deprecations**:
  - `pipeline/data/scenario.json`: No longer the primary data source; inventories are used instead
  - `--character-folder` CLI flag: Replaced by `--video-id`

- **Config updates** (`pipeline/config.js`):
  - Added `ACCOUNTS_SPREADSHEET_ID` for Accounts Inventory
  - Added `productionTab` configuration

**Key decisions:**
1. **Parallel Promise.all for 3 sections**: Each section is independent until lipsync, so process all 3 simultaneously
2. **Kling + TTS parallel within sections**: Video generation and audio generation don't depend on each other
3. **Production tab replaces content_pipeline for new runs**: Cleaner schema with 33 columns, keeps legacy data intact
4. **Inventory-driven pipeline**: scenario.json was static and limiting; reading from Sheets allows dynamic content selection
5. **Backward compatibility maintained**: `--character-folder` still works, content_pipeline tab preserved

**Files changed/created:**
- New: `pipeline/sheets/inventory-reader.js`, `pipeline/sheets/production-manager.js`
- Modified: `pipeline/orchestrator.js` (parallel rewrite), `pipeline/config.js` (accounts ID, productionTab), `scripts/run-pipeline.js` (new CLI flags)
- Deprecated: `pipeline/data/scenario.json`
- Docs: `STRATEGY.md`, `ARCHITECTURE.md`, `README.md`, `CONTEXT.md` all updated

**New Resource IDs:**
| Resource | ID |
|----------|-----|
| Accounts Inventory | `1CmT6C3qCW3md6lJ9Rvc2WNQkWa5zcvlq6Zp_enJHoUE` |

**Test results:** 357 tests passing (330 GAS + 27 pipeline)

**Bug fixes (same session):**
- `drive_file_id` column missing from Motions/Characters inventories â†’ added to both
- `extractDriveFileId()` helper added to orchestrator.js: defensive fallback that extracts file ID from `drive_file_id` field or parses it from `file_link` URL patterns
- `fal-client.js`: enriched error messages now include fal.ai body details (e.g., balance exhausted reason)

**E2E real API result (v4.0 parallel pipeline â€” SUCCESS):**
- VID_202602_0001: 3 sections parallel, 1030s (17.2min) total
- Hook: 9.2MB, Body: 78.4MB, CTA: 17.3MB, Final: 104.9MB (100MB)
- Drive folder: `1IiMhXW7WfyCWADSj-aNF_-AWuzuv-pyy`
- Production tab auto-updated: pipeline_status=completed, all 4 video URLs, processing_time=1030s
- All API steps succeeded: character upload â†’ 3Ã— (motion upload + Kling + TTS parallel + Lipsync) â†’ ffmpeg â†’ Drive

**New documentation:**
- `OPERATIONS.md`: 667-line Japanese operations manual for human operators
  - Covers: inventory management, production workflow, CLI usage, troubleshooting, cost reference

### 2026-02-11: Documentation Audit & Reorganization

**Why:** ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒæ ¹å¹¹ãƒ¬ãƒ™ãƒ«ã«æ•£ä¹±ã—ã€æŠ€è¡“æƒ…å ±ã¨ãƒ“ã‚¸ãƒã‚¹æƒ…å ±ãŒæ··åœ¨ã—ã€åŒã˜æƒ…å ±ãŒè¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã«é‡è¤‡ã—ã¦ã„ãŸã€‚50â†’3,500ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã«å‚™ãˆã€ãƒãƒ¼ãƒ ãƒ¡ã‚¤ãƒˆãŒè¿·ã‚ãšå‚ç…§ã§ãã‚‹ä½“åˆ¶ã‚’æ•´å‚™ã€‚

**What was done:**

- **ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ ã®å†ç·¨æˆ**:
  - `STRATEGY.md` â†’ `docs/STRATEGY.md`
  - `ARCHITECTURE.md` â†’ `docs/ARCHITECTURE.md`
  - `OPERATIONS.md` â†’ `docs/manuals/OPERATIONS.md`
  - `MANUAL.md` â†’ `docs/manuals/GAS_MANUAL.md`
  - `docs/USER_GUIDE.md` â†’ `docs/manuals/USER_GUIDE.md`
  - `docs/account-design-guide.md` â†’ `docs/manuals/account-design-guide.md`
  - ãƒ«ãƒ¼ãƒˆã«ã¯ `README.md` ã¨ `CONTEXT.md` ã®ã¿æ®‹ã™

- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒãƒªã‚·ãƒ¼ç¢ºç«‹**:
  - **README.md**: æŠ€è¡“SSOTï¼ˆã‚¹ã‚­ãƒ¼ãƒã€ã‚³ã‚¹ãƒˆã€Driveæ§‹é€ ã®å”¯ä¸€ã®å®šç¾©å ´æ‰€ï¼‰
  - **docs/STRATEGY.md**: ãƒ“ã‚¸ãƒã‚¹å°‚ç”¨ï¼ˆKPIã€åç›Šã€ãƒ•ã‚§ãƒ¼ã‚ºã€ãƒªã‚¹ã‚¯ã€æ„æ€æ±ºå®šï¼‰â€” æŠ€è¡“çš„ãªä»•æ§˜ã¯å«ã‚ãªã„
  - **docs/ARCHITECTURE.md**: ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“å›³ã€ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å›³ã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ä¸€è¦§
  - **docs/manuals/**: äººé–“ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼å‘ã‘ã‚¬ã‚¤ãƒ‰
  - **é‡è¤‡ç¦æ­¢**: å„æƒ…å ±ã¯1ç®‡æ‰€ã®ã¿ã«è¨˜è¼‰ã—ã€ä»–ã¯ã‚¯ãƒ­ã‚¹ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

- **é‡è¤‡ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®é™¤å»**:
  - ARCHITECTURE.md: Sheetsã‚¹ã‚­ãƒ¼ãƒï¼ˆ110è¡Œï¼‰ã€ã‚³ã‚¹ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆ20è¡Œï¼‰ã‚’å‰Šé™¤ â†’ READMEå‚ç…§ã«å¤‰æ›´
  - OPERATIONS.md: ã‚³ã‚¹ãƒˆå‚è€ƒï¼ˆ27è¡Œï¼‰ã€ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‚¹ã‚­ãƒ¼ãƒä¸€è¦§ï¼ˆ82è¡Œï¼‰ã‚’å‰Šé™¤ â†’ READMEå‚ç…§ã«å¤‰æ›´

- **KPIæ•°å€¤æ›´æ–°**ï¼ˆãƒã‚¹ã‚¿ãƒ¼ã‚·ãƒ¼ãƒˆ.xlsxã‹ã‚‰ï¼‰:
  - 5æœˆ: 520 â†’ **1,480** ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
  - 6æœˆ: 700 â†’ **3,500** ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ

- **ã‚¯ãƒ­ã‚¹ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ä¿®æ­£**: å…¨ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ãƒªãƒ³ã‚¯ã‚’æ–°ãƒ‘ã‚¹ã«æ›´æ–°

- **account-design-guide.md**: ãƒãƒ¼ãƒ ãƒ¡ã‚¤ãƒˆå‘ã‘ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¨­è¨ˆã‚¬ã‚¤ãƒ‰ä½œæˆï¼ˆãƒšãƒ«ã‚½ãƒŠè¨­è¨ˆã€ç”»åƒæº–å‚™ã€ã‚·ãƒŠãƒªã‚ªä½œæˆã€ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªç™»éŒ²æ‰‹é †ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã€FAQï¼‰

- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»**: gitå±¥æ­´ãƒ»å…¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¹ã‚­ãƒ£ãƒ³ã—ã€ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆæ¼æ´©ãŒãªã„ã“ã¨ã‚’ç¢ºèª

**Commits:**
- `85ae670` Docs: audit cleanup â€” add docs index, fix stale refs, remove secrets
- `940ca10` Docs: add account design guide + tech stack table
- `6f4db09` Docs: reorganize structure, deduplicate content, update KPI numbers

### 2026-02-11: ã‚³ã‚¹ãƒˆåˆ†æ & ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

**Why:** ã‚³ã‚¹ãƒˆè¨ˆç®—ãŒ10ç§’ãƒ™ãƒ¼ã‚¹ã§ç®—å‡ºã•ã‚Œã¦ã„ãŸãŒã€å®Ÿéš›ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³è¨­å®šã¯5ç§’/ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã€‚æ­£ç¢ºãªå˜ä¾¡ã«ä¿®æ­£ã—ã€ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼å‘ã‘ã®è©³ç´°ã‚³ã‚¹ãƒˆåˆ†æãƒ¬ãƒãƒ¼ãƒˆã‚’ä½œæˆã€‚ã¾ãŸã€50â†’3,500ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã«å‘ã‘ãŸå…¨ä½“ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆã¨ SNS API èª¿æŸ»ãŒå¿…è¦ã ã£ãŸã€‚

**What was done:**

- **ã‚³ã‚¹ãƒˆä¿®æ­£** ($3.72/æœ¬ â†’ $2.34/æœ¬):
  - Kling: $0.70 â†’ $0.35ï¼ˆ5ç§’Ã—$0.07/ç§’ï¼‰
  - ElevenLabs: ~$0.04 â†’ ~$0.01
  - Lipsync: $0.50 â†’ $0.42ï¼ˆ5ç§’/60Ã—$5.00/åˆ†ï¼‰
  - README.md, ARCHITECTURE.md, OPERATIONS.md ã‚’å…¨ã¦æ›´æ–°

- **æ–°è¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**:
  - `docs/cost-analysis/per-video-cost.md`: 1å‹•ç”»ã‚ãŸã‚Šã®APIè²»ç”¨å†…è¨³
  - `docs/cost-analysis/per-minute-cost.md`: åˆ†å˜ä¾¡æ¯”è¼ƒï¼ˆAPI vs GUIã€ä»–ç¤¾ã‚µãƒ¼ãƒ“ã‚¹æ¯”è¼ƒï¼‰
  - `docs/cost-analysis/full-system-design.md`: å…¨9ãƒ•ã‚§ãƒ¼ã‚ºã®ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆæ›¸ï¼ˆ614è¡Œï¼‰
    - å¸‚å ´ãƒªã‚µãƒ¼ãƒ â†’ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¨­è¨ˆ â†’ ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä½œæˆ â†’ æŠ•ç¨¿ â†’ è¨ˆæ¸¬ â†’ åˆ†æ â†’ æ”¹å–„ã®ãƒ•ãƒ«ãƒ«ãƒ¼ãƒ—
    - æœˆåˆ¥ã‚³ã‚¹ãƒˆè©¦ç®—ï¼ˆ2æœˆã€œ6æœˆï¼‰ã€Pro/Std 2ãƒ—ãƒ©ãƒ³æ¯”è¼ƒ
    - ã‚¤ãƒ³ãƒ•ãƒ©æ§‹æˆã€ä¸¦åˆ—åŒ–æˆ¦ç•¥ã€ãƒ¬ãƒ¼ãƒˆåˆ¶é™åˆ†æ
  - `docs/research/SNS_API_RESEARCH.md`: 4ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®APIèª¿æŸ»ãƒ¬ãƒãƒ¼ãƒˆï¼ˆ615è¡Œï¼‰
    - YouTube / TikTok / Instagram / X ã®æŠ•ç¨¿APIä»•æ§˜ã€åˆ¶é™ã€èªè¨¼æ–¹å¼

- **STRATEGY.mdæ›´æ–°**: ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆæ›¸ãƒ»SNSç ”ç©¶ã¸ã®ã‚¯ãƒ­ã‚¹ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹è¿½åŠ 

**Commits:**
- `9ef6f94` Docs: add cost analysis reports, fix API pricing across all docs
- `0e3f3eb` Docs: add full system design & SNS API research for 50â†’3,500 account scaling

### 2026-02-11: ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— & ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¿®æ­£

**Why:** Tailscale VPNã®æ¥ç¶šä¸å®‰å®šï¼ˆæ±äº¬ãƒªãƒ¬ãƒ¼éšœå®³ã€å…¨ãƒªãƒ¼ã‚¸ãƒ§ãƒ³~2sãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ï¼‰ã«ã‚ˆã‚Šã€VMä¸Šã§ã®é–‹ç™ºä½œæ¥­ãŒå›°é›£ã«ã€‚GitHubã‹ã‚‰ãƒ­ãƒ¼ã‚«ãƒ«ã«ã‚¯ãƒ­ãƒ¼ãƒ³ã—ã¦ä½œæ¥­ç’°å¢ƒã‚’æ§‹ç¯‰ã€‚

**What was done:**

- **ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒæ§‹ç¯‰**:
  - `gh repo clone Ceed-dev/ai-influencer` ã§ ~/Programming/ai-influencer ã«ã‚¯ãƒ­ãƒ¼ãƒ³
  - SCPçµŒç”±ã§VMã‹ã‚‰ç§˜å¯†ãƒ•ã‚¡ã‚¤ãƒ«3ç‚¹ã‚’å–å¾—: `.env`, `.gsheets_token.json`, `video_analytics_hub_claude_code_oauth.json`
  - `npm install` å®Ÿè¡Œï¼ˆ313ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼‰
  - Google Sheets APIæ¥ç¶šç¢ºèªï¼ˆproductionã‚¿ãƒ–èª­å–OKï¼‰
  - Google Drive APIæ¥ç¶šç¢ºèª
  - å…¨357ãƒ†ã‚¹ãƒˆãƒ‘ã‚¹ï¼ˆ330 GAS + 27 pipelineï¼‰

- **STRATEGY.mdä¿®æ­£**:
  - æŠ•ç¨¿é »åº¦ã®è¨˜è¿°ã‚’ä¿®æ­£: ã€Œ7æœ¬/é€±ã€â†’ã€Œ1æ—¥1æœ¬/ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆæ—¥æ¬¡ç·æŠ•ç¨¿æ•° = ç¨¼åƒã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ•°ï¼‰ã€
  - åˆ†æãƒ»æ”¹å–„ãƒ•ã‚§ãƒ¼ã‚ºã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ğŸŸ¢è‡ªå‹• â†’ ğŸ”´å®Ÿè£…é€”ä¸­ã«ä¿®æ­£ï¼ˆåŸºç›¤å®Ÿè£…æ¸ˆã¿ã ãŒæœ¬ç•ªé‹ç”¨æœªé–‹å§‹ï¼‰
  - å¸‚å ´ãƒªã‚µãƒ¼ãƒç”¨ã‚·ãƒ¼ãƒˆæº–å‚™ã‚¿ã‚¹ã‚¯ã‚’ç›´è¿‘ã®å„ªå…ˆäº‹é …ã«è¿½åŠ ï¼ˆ2/14ä½¿ç”¨é–‹å§‹ã€Badhanä½œæˆâ†’é§¿å†´FBï¼‰

**Key notes:**
- VMã®refresh_tokenãŒãƒ­ãƒ¼ã‚«ãƒ«ã§ã‚‚ãã®ã¾ã¾æœ‰åŠ¹ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶OAuthèªè¨¼ä¸è¦ï¼‰
- client.jsã®è‡ªå‹•ãƒˆãƒ¼ã‚¯ãƒ³ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥æ©Ÿæ§‹ã«ã‚ˆã‚Šã€æœŸé™åˆ‡ã‚Œãƒˆãƒ¼ã‚¯ãƒ³ã‚‚è‡ªå‹•æ›´æ–°
- Tailscale Exit Nodeã¯æœªè¨­å®šã®ãŸã‚ã€ä¸€èˆ¬ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã¯VPNçµŒç”±ã›ãšç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹

### 2026-02-12: ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ä»•æ§˜ç¢ºèª & æœªå®Ÿè£…æ©Ÿèƒ½ã®æ´—ã„å‡ºã—

**Why:** 36å‹•ç”»/æ—¥ã®é‡ç”£é‹ç”¨ã«å‘ã‘ã¦ã€ç¾çŠ¶ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãŒå®Ÿéš›ã«ãã®ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆã‚’é”æˆã§ãã‚‹ã‹ã®ç¢ºèªã€‚

**ç¢ºèªçµæœ â€” ç¾çŠ¶ã®ã‚®ãƒ£ãƒƒãƒ—:**

1. **ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¯ã€Œãƒ¬ã‚·ãƒ”å®Ÿè¡Œå™¨ã€**: productionã‚·ãƒ¼ãƒˆã«`edit_status=ready`ã®è¡ŒãŒã‚ã‚‹å ´åˆã®ã¿å‹•ç”»ã‚’ç”Ÿæˆã™ã‚‹ã€‚ä½•ã‚’ä½œã‚‹ã‹è‡ªä½“ã¯æ±ºã‚ãªã„ã€‚ã¤ã¾ã‚Šæ¯æ—¥36æœ¬ä½œã‚‹ã«ã¯ã€æ¯æ—¥36è¡Œã®ãƒ¬ã‚·ãƒ”ï¼ˆaccount_id, scenario_id, motion_id, character_id, audio_id, scriptsï¼‰ã‚’productionã‚·ãƒ¼ãƒˆã«æ›¸ãè¾¼ã‚€å¿…è¦ãŒã‚ã‚‹ã€‚ã“ã®è‡ªå‹•åŒ–ã¯æœªå®Ÿè£…ã€‚

2. **ãƒ—ãƒ¼ãƒ«åˆ¶å¾¡ï¼ˆæœªå®Ÿè£…ï¼‰**: å‹•ç”»ãƒ—ãƒ¼ãƒ«ãŒä¸€å®šæ•°ï¼ˆä¾‹:100æœ¬ï¼‰æºœã¾ã£ãŸã‚‰åœæ­¢ã€æ¶ˆè²»ã•ã‚ŒãŸã‚‰å†é–‹ã™ã‚‹ä»•çµ„ã¿ãŒãªã„ã€‚ç¾çŠ¶ã¯æ‰‹å‹•ã§`--limit N`ã‚’å©ãé‹ç”¨ã€‚

3. **å‹•ç”»ä¸¦åˆ—ç”Ÿæˆï¼ˆæœªå®Ÿè£…ï¼‰**: ç¾çŠ¶ã¯1æœ¬ãšã¤é †æ¬¡å‡¦ç†ï¼ˆå„æœ¬å†…ã®3ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯ä¸¦åˆ—ï¼‰ã€‚36æœ¬é †æ¬¡ = ~7.2æ™‚é–“ã€‚è¤‡æ•°æœ¬ã®åŒæ™‚ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯ã¯æœªå®Ÿè£…ã€‚

4. **æŠ•ç¨¿ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ‰‹é †æ›¸ï¼ˆæœªä½œæˆï¼‰**: ã€Œæ¯æ—¥ã©ã®ã‚·ãƒ¼ãƒˆã‚’è¦‹ã¦ã€ã©ã“ã‹ã‚‰DLã—ã¦ã€æŠ•ç¨¿å¾Œã«ã©ã“ã‚’æ›´æ–°ã™ã‚‹ã‹ã€ã®æ‰‹é †æ›¸ãŒãªã„ã€‚

**fal.aiã‚¯ãƒ¬ã‚¸ãƒƒãƒˆè©¦ç®—:**
- 36æœ¬/æ—¥ Ã— $2.31/æœ¬ = $83.16/æ—¥
- ã‚¹ãƒˆãƒ¬ã‚¹ãƒ†ã‚¹ãƒˆ1å›: ~$100ï¼ˆãƒªãƒˆãƒ©ã‚¤ä½™è£•å«ã‚€ï¼‰
- $1,000è³¼å…¥ã§40ä¸¦è¡Œã‚¿ã‚¹ã‚¯ã‚¢ãƒ³ãƒ­ãƒƒã‚¯ï¼ˆæœ¬ç•ªé‹ç”¨å‘ã‘ï¼‰

### 2026-02-12: TTS Migration: ElevenLabs â†’ Fish Audio

- Migrated TTS from ElevenLabs (fal.ai proxy) to Fish Audio (Hanabi AI Inc., ç›´æ¥REST API â€” fal.ai ã¨ã¯å®Œå…¨ã«åˆ¥ã‚µãƒ¼ãƒ“ã‚¹)
- Code changes: tts-generator.js (full rewrite), config.js (fishAudio section), orchestrator.js (referenceId param), inventory-reader.js (voice_id required validation)
- Removed deprecated `runPipeline` function and legacy CLI options (`--character-folder`)
- voice_id (Fish Audio reference_id) ã‚’å¿…é ˆåŒ–: ç©ºæ¬„ã ã¨ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãŒã‚¨ãƒ©ãƒ¼åœæ­¢
- FISH_AUDIO_API_KEY æœªè¨­å®šæ™‚ã«æ˜ç¢ºãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿½åŠ 
- Cost reduction: ~90% on TTS ($0.01â†’$0.001 per section), per-video total $2.34â†’$2.31 (Pro)
- Fish Audio returns binary MP3 â†’ uploaded to fal.storage for lipsync compatibility
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå…¨ä½“ã§ fal.ai ã¨ Fish Audio ã‚’æ˜ç¢ºã«åˆ†é›¢ï¼ˆåˆ¥ã‚µãƒ¼ãƒ“ã‚¹ã§ã‚ã‚‹ã“ã¨ã‚’æ˜è¨˜ï¼‰
- voice_models ã‚¿ãƒ–ã‚’ Audio Inventory ã«ä½œæˆï¼ˆEN 10 + JA 10 = 20ãƒ¢ãƒ‡ãƒ«ï¼‰
- Production sheet VID_202602_0001 ã« voice_id è¨­å®š: `802e3bc2b27e49c2995d23ef70e6ac89` (Energetic Male)
- 358 tests passing (330 GAS + 28 pipeline)

## Current System State (as of 2026-02-16)

### Deployed and Working (GAS Analytics v2.0)
- Master Spreadsheet with all 9 tabs initialized and formatted
- 4 Component Inventory spreadsheets (Scenarios, Motions, Characters, Audio)
- Google Drive folder structure (AI-Influencer root with all subfolders)
- Web App deployed with anonymous access
- OpenAI integration working (via _config sheet fallback)
- Demo data: 3 videos (2 analyzed with metrics, 1 draft)
- Demo components: 7 scenarios, 5 motions, 3 characters, 4 audio
- All 330 GAS tests passing

### Implemented (Pipeline v4.0 - 2026-02-10) â€” Production Rebuild
- All inventory spreadsheets populated with real data (ãƒ†ãƒ³ãƒ—ãƒ¬.xlsx)
- 3 motion videos uploaded to Drive (Hooks/Bodies/CTAs)
- Accounts Inventory: 7 accounts + 12 Gmail credentials
- Production tab: 33-column tracking in Master Spreadsheet
- `inventory-reader.js`: Reads inventories, resolves component IDs
- `production-manager.js`: Manages production tab CRUD
- Orchestrator parallelized: 3 sections via Promise.all, Kling+TTS parallel within sections
- Processing time: ~35min â†’ ~12min per video
- CLI: `node scripts/run-pipeline.js --video-id <ID> [--limit N] [--dry-run]`
- `--character-folder` deprecated (backward compatible)
- `scenario.json` deprecated (inventories used instead)
- 33 pipeline tests passing

### Implemented (Pipeline Phase 0 - 2026-02-10) â€” E2E Verified
- Content generation pipeline: character image â†’ 3-section video â†’ Drive â€” **working end-to-end**
- First successful E2E: CNT_202602_2916 (54MB final video, ~35min processing time)
- 3 media modules (Kling motion-control, Fish Audio TTS, Lipsync v2/pro)
- fal.storage upload (replaces Cloudinary)
- ffmpeg concat utility for 3-section video joining
- content_pipeline sheet with schema (15 columns) â€” 3 records (2 error during dev, 1 completed)
- Character image CHR_0001_v1.jpg uploaded to Drive `Characters/Images/CHR_0001/`
- Output stored at `Productions/2026-02-10/CNT_202602_2916/` (4 MP4 files)

### Documentation (2026-02-16 updated)
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒãƒªã‚·ãƒ¼ç¢ºç«‹: README=æŠ€è¡“SSOT, STRATEGY=ãƒ“ã‚¸ãƒã‚¹å°‚ç”¨, é‡è¤‡ç¦æ­¢
- ã‚³ã‚¹ãƒˆè¨ˆç®—ä¿®æ­£: $3.72 â†’ $2.34/æœ¬ï¼ˆ5ç§’/ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼‰
- å…¨9ãƒ•ã‚§ãƒ¼ã‚ºã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆæ›¸ + SNS APIèª¿æŸ»ãƒ¬ãƒãƒ¼ãƒˆä½œæˆæ¸ˆã¿
- account-design-guide: ãƒãƒ¼ãƒ ãƒ¡ã‚¤ãƒˆå‘ã‘ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¨­è¨ˆã‚¬ã‚¤ãƒ‰ä½œæˆæ¸ˆã¿
- KPIé”æˆå¯èƒ½æ€§åˆ†æãƒ¬ãƒãƒ¼ãƒˆ v1: 6æœˆKPIé”æˆç‡3ã€œ11%ã¨äºˆæ¸¬ã€6ã¤ã®ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ç‰¹å®š
- KPIé”æˆå¯èƒ½æ€§åˆ†æãƒ¬ãƒãƒ¼ãƒˆ v2: AIé§†å‹•ã‚·ãƒŠãƒªã‚ªæ¯”è¼ƒï¼ˆç¾è¡Œ3ã€œ11% / ã‚³ãƒ¼ãƒ‰å…¨è‡ªå‹•åŒ–20ã€œ51% / AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ35ã€œ71%ï¼‰
- ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãƒ»ã‚³ãƒ³ãƒ†ãƒ³ãƒ„é‡åˆ†æ: ã€Œé‡âˆçš„ä¸­ç‡ã€ã‚’å¦å®šã€å¯¾æ•°çš„é–¢ä¿‚ã‚’å®Ÿè¨¼ã€AIæˆåŠŸç‡0.2ã€œ0.3%

### XæŠ•ç¨¿ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ (2026-02-15 ä½œæˆ)
- 36æŠ•ç¨¿ï¼ˆ12ã‚­ãƒ£ãƒ© Ã— 3æ—¥åˆ†ï¼‰ç”Ÿæˆæ¸ˆã¿ â€” Driveãƒ•ã‚©ãƒ«ãƒ€ã«æ ¼ç´
- ç®¡ç†ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆ: ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼å‘ã‘ã€ŒæŠ•ç¨¿ã‚¿ã‚¹ã‚¯ã€ã‚¿ãƒ–ï¼ˆãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ä»˜ãæ™‚ç³»åˆ—ã‚½ãƒ¼ãƒˆï¼‰
- Drive: `ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æƒ…å ±/03_XæŠ•ç¨¿_å…¨12ã‚­ãƒ£ãƒ©_2026å¹´2æœˆ14-16æ—¥/` ã«å…¨æˆæœç‰©æ ¼ç´

### æŠ•ç¨¿è‡ªå‹•åŒ– (2026-02-16 å®Ÿè£…å®Œäº†)
- **XæŠ•ç¨¿**: ã‚³ãƒ¼ãƒ‰å®Œæˆï¼ˆcredential-manager, task-manager, twitter adapter, watcher daemon, oauth setup CLIï¼‰
- **YouTube Shorts**: ã‚³ãƒ¼ãƒ‰å®Œæˆï¼ˆcredential-manager, task-manager, youtube adapter, watcher daemon, oauth setup CLIï¼‰
- **TikTok**: æœªå®Ÿè£…ï¼ˆåŒãƒ‘ã‚¿ãƒ¼ãƒ³ã§å®Ÿè£…äºˆå®šï¼‰
- **Instagram**: æœªå®Ÿè£…ï¼ˆåŒãƒ‘ã‚¿ãƒ¼ãƒ³ã§å®Ÿè£…äºˆå®šï¼‰
- **å…¨ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å…±é€š**: OAuthèªè¨¼æƒ…å ±ã®è¨­å®šã¯ã€TikTokãƒ»IGå®Ÿè£…å®Œäº†å¾Œã«ã¾ã¨ã‚ã¦å®Ÿæ–½äºˆå®š
- PM2: 3ã‚¢ãƒ—ãƒªæ§‹æˆï¼ˆpipeline-watcher, posting-scheduler, yt-posting-schedulerï¼‰
- ãƒ†ã‚¹ãƒˆ: 400 tests passing (343 GAS + 57 pipeline)

### Pending
- **TikTokæŠ•ç¨¿è‡ªå‹•åŒ–**: Content Posting APIï¼ˆX/YTã¨åŒãƒ‘ã‚¿ãƒ¼ãƒ³ã§å®Ÿè£…ï¼‰
- **InstagramæŠ•ç¨¿è‡ªå‹•åŒ–**: Graph APIï¼ˆX/YTã¨åŒãƒ‘ã‚¿ãƒ¼ãƒ³ã§å®Ÿè£…ï¼‰
- **4ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ OAuthè¨­å®š**: TikTokãƒ»IGå®Ÿè£…å®Œäº†å¾Œã«Xãƒ»YTå«ã‚å…¨ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã¾ã¨ã‚ã¦å®Ÿæ–½
- Batch execution with `--limit` for multiple videos
- Metrics collection automation
- GAS analytics integration with production tab data

### Files in Repository
```
gas/                            # GAS analytics (unchanged since v2.0)
  Code.gs                       # Web App endpoints + UI menu (1157 lines)
  Config.gs                     # Settings, schema, constants (389 lines)
  Setup.gs                      # One-click system setup (762 lines)
  Migration.gs                  # v1 to v2 migration (224 lines)
  CSVParser.gs                  # Platform-specific CSV parsers (190 lines)
  Normalizer.gs                 # Unified schema conversion (208 lines)
  Linker.gs                     # video_uid matching (238 lines)
  KPIEngine.gs                  # KPI comparison (249 lines)
  LLMAnalyzer.gs                # OpenAI integration (665 lines)
  SheetWriter.gs                # Sheet write operations (275 lines)
  ComponentManager.gs           # Component CRUD + context (283 lines)
  MasterManager.gs              # Master sheet + workflow (255 lines)
  ScoreUpdater.gs               # Component scoring (212 lines)
  Utils.gs                      # ID generators, helpers (544 lines)
  appsscript.json               # GAS manifest
  PipelineUI.gs                 # Pipeline menu handlers (queue/validate/status/stop)
  tests/                        # 10 test suites, 343 tests

pipeline/                       # Node.js content pipeline (v4.0)
  config.js                     # Environment configuration
  orchestrator.js               # 3-section parallel pipeline (Promise.all)
  data/scenario.json            # Scenario template (DEPRECATED)
  sheets/client.js              # Google Sheets/Drive API (OAuth2)
  sheets/inventory-reader.js    # Inventory reader + ID resolution (v4.0)
  sheets/production-manager.js  # Production tab CRUD (v4.0)
  sheets/posting-task-manager.js # XæŠ•ç¨¿ã‚¿ã‚¹ã‚¯ç®¡ç†ï¼ˆæ™‚é–“çª“åˆ¤å®šã€CHARACTER_NAME_MAPï¼‰
  sheets/yt-posting-task-manager.js # YTæŠ•ç¨¿ã‚¿ã‚¹ã‚¯ç®¡ç†ï¼ˆYT_CHARACTER_NAME_MAPã€Driveå¿…é ˆï¼‰
  sheets/account-manager.js     # Accounts tab CRUD
  sheets/content-manager.js     # Content pipeline tab CRUD (legacy)
  media/fal-client.js           # fal.ai SDK + fal.storage upload + Drive download
  media/video-generator.js      # Kling v2.6 motion-control
  media/tts-generator.js        # Fish Audio TTS (direct REST API)
  media/lipsync.js              # Sync Lipsync v2/pro (sync_mode: bounce)
  media/concat.js               # ffmpeg filter_complex re-encode + blackdetect
  storage/drive-storage.js      # Video URL â†’ Drive upload
  posting/x-credential-manager.js   # X per-account OAuth 1.0a tokenç®¡ç†
  posting/yt-credential-manager.js  # YT per-account OAuth 2.0 refresh tokenç®¡ç†
  posting/poster.js             # Unified posting interface (stub)
  posting/adapters/twitter.js   # X/Twitter multi-account posting (postTweet)
  posting/adapters/youtube.js   # YouTube multi-account upload (uploadShort + Driveâ†’tmpâ†’upload)
  posting/adapters/instagram.js # Instagram posting (stub)
  posting/adapters/tiktok.js    # TikTok posting (stub)

tests/                          # Pipeline tests
  pipeline.test.js              # 57 tests

scripts/                        # CLI entry points
  run-pipeline.js               # --video-id <ID> [--limit N] [--dry-run]
  watch-pipeline.js             # Polling watcher daemon (PM2-managed, 30s, MAX_CONCURRENT=5)
  watch-posting.js              # XæŠ•ç¨¿ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ãƒ‡ãƒ¼ãƒ¢ãƒ³ (PM2, 60s poll)
  watch-yt-posting.js           # YTæŠ•ç¨¿ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ãƒ‡ãƒ¼ãƒ¢ãƒ³ (PM2, 120s poll, daily quota)
  x-oauth-setup.js              # X OAuth 1.0a PIN-basedèªå¯CLI
  yt-oauth-setup.js             # YouTube OAuth 2.0èªå¯CLI (localhost callback + --manual)
  run-daily.js                  # Daily batch execution (stub)
  collect-metrics.js            # Metrics collection (stub)
  gsheet.py                     # Google Sheets CLI utility

ecosystem.config.js             # PM2 configuration (3 apps: pipeline, x-posting, yt-posting)

docs/                           # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆ2026-02-13 æ›´æ–°ï¼‰
  STRATEGY.md                   # ãƒ“ã‚¸ãƒã‚¹æˆ¦ç•¥ï¼ˆKPI, åç›Š, ãƒ•ã‚§ãƒ¼ã‚º, æ„æ€æ±ºå®šï¼‰
  ARCHITECTURE.md               # æŠ€è¡“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ï¼ˆã‚·ã‚¹ãƒ†ãƒ å›³, ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ï¼‰
  KPI-FEASIBILITY-ANALYSIS.md   # KPIé”æˆå¯èƒ½æ€§åˆ†æãƒ¬ãƒãƒ¼ãƒˆ v1ï¼ˆ2026-02-13ï¼‰
  KPI-FEASIBILITY-ANALYSIS-v2-AI-DRIVEN.md  # KPIåˆ†æ v2 AIé§†å‹•ã‚·ãƒŠãƒªã‚ªæ¯”è¼ƒï¼ˆ2026-02-13ï¼‰
  ALGORITHM-CONTENT-VOLUME-ANALYSIS.md      # ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ Ã—ã‚³ãƒ³ãƒ†ãƒ³ãƒ„é‡ åˆ†æï¼ˆ2026-02-13ï¼‰
  n8n-integration.md            # n8n ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼é€£æºã‚¬ã‚¤ãƒ‰
  cost-analysis/
    per-video-cost.md           # 1å‹•ç”»ã‚ãŸã‚ŠAPIè²»ç”¨å†…è¨³
    per-minute-cost.md          # åˆ†å˜ä¾¡æ¯”è¼ƒï¼ˆAPI vs GUIï¼‰
    full-system-design.md       # å…¨9ãƒ•ã‚§ãƒ¼ã‚º ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆæ›¸
  research/
    SNS_API_RESEARCH.md         # SNS API èª¿æŸ»ãƒ¬ãƒãƒ¼ãƒˆï¼ˆYT/TT/IG/Xï¼‰
  manuals/
    OPERATIONS.md               # é‹ç”¨ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ï¼ˆæ—¥æœ¬èªï¼‰
    GAS_MANUAL.md               # GASæ“ä½œãƒãƒ‹ãƒ¥ã‚¢ãƒ«ï¼ˆæ—¥æœ¬èªï¼‰
    USER_GUIDE.md               # ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¬ã‚¤ãƒ‰ï¼ˆæ—¥æœ¬èªï¼‰
    account-design-guide.md     # ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¨­è¨ˆã‚¬ã‚¤ãƒ‰ï¼ˆãƒãƒ¼ãƒ å‘ã‘ï¼‰

README.md                       # æŠ€è¡“SSOTï¼ˆã‚¹ã‚­ãƒ¼ãƒ, ã‚³ã‚¹ãƒˆ, Driveæ§‹é€ ï¼‰
CONTEXT.md                      # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå±¥æ­´ï¼ˆã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
```


## Technical Notes

### Platform CSV Column Variations

YouTube may change column names between exports. Known variations:
- "Views" / "View count" / "è¦–è´å›æ•°"
- "Watch time (hours)" / "ç·å†ç”Ÿæ™‚é–“ï¼ˆæ™‚é–“ï¼‰"

TikTok variations:
- "Video views" / "Views"
- "Average watch time" / "Avg. watch time"

Instagram variations:
- "Plays" / "Views"
- "Reach" / "Accounts reached"

### GAS Limitations to Remember
- 6-minute execution timeout
- 20MB response size limit
- 100 triggers per user limit
- Properties Service: 500KB total, 9KB per property

### OpenAI Integration Notes
- Use TSV output format for structured responses (more reliable parsing than JSON)
- Batch multiple videos per request to reduce API calls
- Implement exponential backoff for rate limiting
- v2.0: Include component context for better recommendations

### v2.0 Component Score System
- Each analyzed video's overall_score contributes to its components' avg_performance_score
- Scores normalized 0-100 across platforms
- Top-performing components surfaced in AI recommendation prompts
- Score updates cascade: video analyzed -> master updated -> all linked components updated

### 2026-02-12: Pipeline GUI Execution â€” Sheet Button â†’ Auto Generation

**What was done:**
- Added Pipeline submenu to Google Sheets UI (Video Analytics v2 > Pipeline)
- Created `gas/PipelineUI.gs` with queue/validate/status/stop handlers
- Added `getQueuedRows()` to `production-manager.js` (watcher-specific filter)
- Created `scripts/watch-pipeline.js` polling daemon (30s interval, PM2-managed)
- Created `ecosystem.config.js` for PM2 process management
- Added 5 pipeline tests (tests 28-32) and 13 GAS PipelineUI tests
- Updated OPERATIONS.md with GUI workflow as primary, CLI as "advanced"
- Updated ARCHITECTURE.md with watcher architecture diagram

**Key decisions:**
1. **GAS for UI only, Node.js for processing**: GAS handles menu/validation/status. All API calls run on VM.
2. **Polling over webhooks**: 30s polling is simpler and more reliable than GAS triggers or webhooks.
3. **queued vs queued_dry**: Two statuses allow dry-run from the same GUI workflow.
4. **Concurrent job processing**: Watcher processes up to MAX_CONCURRENT=5 videos simultaneously (updated 2026-02-14, was 1 job per poll).
5. **PM2 for process management**: Auto-restart, systemd integration, log management.

**New files:**
- `gas/PipelineUI.gs` â€” GAS Pipeline menu handlers
- `scripts/watch-pipeline.js` â€” Polling watcher daemon
- `ecosystem.config.js` â€” PM2 configuration
- `gas/tests/PipelineUI.test.js` â€” 13 GAS UI handler tests

**Test count: 376** (343 GAS / 10 suites + 33 pipeline / 1 suite)

### 2026-02-13: KPIé”æˆå¯èƒ½æ€§åˆ†æãƒ¬ãƒãƒ¼ãƒˆä½œæˆ

**Why:** ç¾è¡Œã®ãƒ•ãƒ­ãƒ¼ãƒ»ä»•æ§˜ã‚’å‰æã«ã€6æœˆã¾ã§ã®KPIï¼ˆ50â†’3,500ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼‰ãŒã©ã®ç¨‹åº¦é”æˆå¯èƒ½ã‹ã‚’å®šé‡çš„ã«è©•ä¾¡ã™ã‚‹å¿…è¦ãŒã‚ã£ãŸã€‚ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼ã¸ã®ç¾å®Ÿçš„ãªè¦‹é€šã—ã®å…±æœ‰ã¨ã€å„ªå…ˆæ–½ç­–ã®æ˜ç¢ºåŒ–ãŒç›®çš„ã€‚

**What was done:**

- **`docs/KPI-FEASIBILITY-ANALYSIS.md`** æ–°è¦ä½œæˆï¼ˆ504è¡Œã€æ—¥æœ¬èªï¼‰
  - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ï¼ˆãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚³ãƒ¼ãƒ‰ã€GASã‚³ãƒ¼ãƒ‰ã€å…¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã€ãƒ†ã‚¹ãƒˆãƒ»è¨­å®šï¼‰ã‚’ç¶²ç¾…çš„ã«èª¿æŸ»ã—ãŸä¸Šã§åˆ†æ
  - 8ã‚»ã‚¯ã‚·ãƒ§ãƒ³æ§‹æˆ: ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼ / KPIç›®æ¨™æ•´ç† / ç¾çŠ¶èƒ½åŠ›åˆ†æ / æœˆåˆ¥é”æˆå¯èƒ½æ€§ / ãƒœãƒˆãƒ«ãƒãƒƒã‚¯åˆ†æ / åç›Šäºˆæ¸¬ã®ç¾å®Ÿæ€§ / å¿…è¦ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ / çµè«–

**åˆ†æçµæœã‚µãƒãƒªãƒ¼:**

| æœˆ | KPIç›®æ¨™ | ç¾å®Ÿçš„äºˆæ¸¬ | é”æˆç‡ | ä¸»è¦åˆ¶ç´„ |
|---|---|---|---|---|
| 2æœˆ | 50 | 15ã€œ30 | 30ã€œ60% | fal.aiã‚¯ãƒ¬ã‚¸ãƒƒãƒˆæœªè³¼å…¥ã€ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¨­è¨ˆé…å»¶ |
| 3æœˆ | 160 | 30ã€œ65 | 19ã€œ41% | ãƒãƒ«ãƒãƒ¯ãƒ¼ã‚«ãƒ¼æœªå®Ÿè£…ã€2æœˆã®é…å»¶æ³¢åŠ |
| 4æœˆ | 340 | 50ã€œ120 | 15ã€œ35% | æŠ•ç¨¿è‡ªå‹•åŒ–ãŒåˆ†å²ç‚¹ |
| 5æœˆ | 1,480 | 80ã€œ250 | 5ã€œ17% | ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ä¸–ä»£äº¤ä»£ã®æˆå¦ |
| 6æœˆ | 3,500 | 100ã€œ400 | 3ã€œ11% | å…¨è‡ªå‹•åŒ–ãƒ»å¤§è¦æ¨¡ã‚¤ãƒ³ãƒ•ãƒ©æœªå®Œæˆ |

**ç‰¹å®šã—ãŸ6ã¤ã®ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ï¼ˆå½±éŸ¿åº¦é †ï¼‰:**
1. æŠ•ç¨¿ã®æ‰‹å‹•é‹ç”¨ï¼ˆè‡´å‘½çš„ï¼‰â€” 4æœˆ340ä»¶/æ—¥ãŒç‰©ç†çš„ä¸Šé™
2. ã‚·ãƒ³ã‚°ãƒ«ãƒ¯ãƒ¼ã‚«ãƒ¼æ§‹æˆï¼ˆé«˜ï¼‰â€” 3æœˆ126æœ¬/æ—¥ã§æ—¢ã«ã‚­ãƒ£ãƒ‘è¶…é
3. ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç«‹ã¡ä¸Šã’ã®æ‰‹å‹•ãƒ—ãƒ­ã‚»ã‚¹ï¼ˆé«˜ï¼‰â€” 5æœˆã«52ä»¶/æ—¥ã®æ–°è¦ãŒå¿…è¦
4. ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªä¸è¶³ï¼ˆä¸­ã€œé«˜ï¼‰â€” ã‚·ãƒŠãƒªã‚ª3æœ¬ãƒ»ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³3æœ¬ã®ã¿
5. fal.aiåŒæ™‚ã‚¿ã‚¹ã‚¯åˆ¶é™ï¼ˆä¸­ï¼‰â€” 5æœˆä»¥é™ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºå¿…é ˆ
6. Google Sheetsã®ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ï¼ˆä¸­ï¼‰â€” 15ãƒ¯ãƒ¼ã‚«ãƒ¼åŒæ™‚ã§ç«¶åˆãƒªã‚¹ã‚¯

**åç›Šäºˆæ¸¬ã®æ¤œè¨¼:**
- STRATEGY.mdã®åç›Šäºˆæ¸¬ï¼ˆ6æœˆ: Â¥3.78å„„/æœˆï¼‰ã¯ã€å…¨ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒä¸€å®šãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼åŸºç›¤ã‚’æŒã¤å‰æ
- æ–°è¦ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¯ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼ã‚¼ãƒ­ã‹ã‚‰ã‚¹ã‚¿ãƒ¼ãƒˆã€å„ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®åç›ŠåŒ–æ¡ä»¶é”æˆã«3ã€œ12ãƒ¶æœˆè¦ã™ã‚‹
- ç¾å®Ÿçš„ãª6æœˆåç›Š: Â¥50ä¸‡ã€œ500ä¸‡ï¼ˆè¨ˆç”»æ¯”1ã€œ1.3%ï¼‰

**æ ¹æœ¬åŸå› :** KPIãŒæŒ‡æ•°é–¢æ•°çš„æˆé•·ï¼ˆç‰¹ã«5æœˆ+335%ï¼‰ã‚’è¦æ±‚ã™ã‚‹ã®ã«å¯¾ã—ã€ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºãƒ»çµ„ç¹”æ‹¡å¤§ã¯ç·šå½¢çš„ã«ã—ã‹é€²ã‚ã‚‰ã‚Œãªã„ã‚®ãƒ£ãƒƒãƒ—

### 2026-02-13: KPIé”æˆå¯èƒ½æ€§åˆ†æ v2 â€” AIé§†å‹•ã‚·ãƒŠãƒªã‚ªæ¯”è¼ƒãƒ¬ãƒãƒ¼ãƒˆ

**Why:** v1ãƒ¬ãƒãƒ¼ãƒˆã§ã¯ç¾è¡Œä»•æ§˜ãƒ™ãƒ¼ã‚¹ã§6æœˆKPIé”æˆç‡3ã€œ11%ã¨è©•ä¾¡ã€‚ã—ã‹ã—ã€Œå…¨è‡ªå‹•åŒ–ãŒå®Œæˆã—ãŸå ´åˆã€ã€ŒAIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒãƒ¼ãƒ ã‚’åŸºç›¤ã«ã—ãŸå ´åˆã€ã¨ã„ã†2ã¤ã®è¿½åŠ ã‚·ãƒŠãƒªã‚ªã®åˆ†æãŒå¿…è¦ã ã£ãŸã€‚å¸‚å ´å´ã®ä¸ç¢ºå®Ÿæ€§ã¯è¨±å®¹ã™ã¹ãã‚‚ã®ã¨ã—ã¦æ‰±ã„ã€ã‚·ã‚¹ãƒ†ãƒ å´ã§æ”¹å–„å¯èƒ½ãªç¯„å›²ã«ç„¦ç‚¹ã‚’å½“ã¦ã‚‹ã€‚

**What was done:**

- **`docs/KPI-FEASIBILITY-ANALYSIS-v2-AI-DRIVEN.md`** æ–°è¦ä½œæˆï¼ˆç´„410è¡Œã€æ—¥æœ¬èªï¼‰
  - 3ã‚·ãƒŠãƒªã‚ªæ¯”è¼ƒ: ç¾è¡Œ(v1) / ã‚³ãƒ¼ãƒ‰å…¨è‡ªå‹•åŒ–(A) / AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒãƒ¼ãƒ (B)
  - Claude Code Agent Team ã®æŠ€è¡“èª¿æŸ»ï¼ˆå®Ÿé¨“çš„æ©Ÿèƒ½ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆåˆ¶ç´„ã€ã‚³ã‚¹ãƒˆæ§‹é€ ï¼‰
  - ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒãƒ¼ãƒ æ§‹æˆæ¡ˆï¼ˆ5ç­ã€20ã€œ50ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼‰ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³
  - è¨±å®¹ã™ã¹ãä¸ç¢ºå®Ÿæ€§ã®æ•´ç†ï¼ˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„å“è³ªã€ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼ç²å¾—é€Ÿåº¦ã€è¦ç´„ãƒªã‚¹ã‚¯ã€å­¦ç¿’åŠ¹æœï¼‰

- **`docs/KPI-FEASIBILITY-ANALYSIS.md`** ä¿®æ­£
  - ãƒšãƒ¼ã‚¸ä¸Šéƒ¨ã®blockquoteæ›¸å¼ã‚’ä¿®æ­£ï¼ˆé …ç›®é–“ã«ç©ºè¡ŒæŒ¿å…¥ã§æ”¹è¡Œè¡¨ç¤ºã«å¯¾å¿œï¼‰

**3ã‚·ãƒŠãƒªã‚ªæ¯”è¼ƒçµæœ:**

| ã‚·ãƒŠãƒªã‚ª | 6æœˆKPIé”æˆç‡ | ãƒ•ãƒ«ç¨¼åƒã¾ã§ã®æœŸé–“ | æ ¸å¿ƒçš„ãªé•ã„ |
|---|---|---|---|
| ç¾è¡Œï¼ˆv1ï¼‰ | 3ã€œ11% | æœªå®š | æ‰‹å‹•é‹ç”¨ã®é™ç•Œ |
| A: ã‚³ãƒ¼ãƒ‰å…¨è‡ªå‹•åŒ– | 20ã€œ51% | 3ã€œ4ãƒ¶æœˆ | é–‹ç™ºãƒªãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ ãŒãƒœãƒˆãƒ«ãƒãƒƒã‚¯ |
| B: AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒãƒ¼ãƒ  | 35ã€œ71% | å³æ—¥ã€œæ•°æ—¥ | é–‹ç™ºãƒªãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ ã‚¼ãƒ­ |

**ã‚·ãƒŠãƒªã‚ªBã®å„ªä½æ€§:**
- ã‚³ãƒ¼ãƒ‰é–‹ç™ºã®å¾…ã¡æ™‚é–“ãŒãªã„ï¼ˆå³æ—¥ç¨¼åƒï¼‰
- ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¿½åŠ  = å‡¦ç†èƒ½åŠ›è¿½åŠ ï¼ˆã‚¤ãƒ³ãƒ•ãƒ©æ§‹ç¯‰ä¸è¦ï¼‰
- è‡ªå¾‹çš„ã‚¨ãƒ©ãƒ¼å¾©æ—§ã€24æ™‚é–“ç¨¼åƒ
- SNSã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®è¤‡åˆ©çš„æˆé•·ï¼ˆæ—©æœŸæŠ•ç¨¿é–‹å§‹ãŒ6æœˆæˆæœã«æŒ‡æ•°é–¢æ•°çš„ã«å¯„ä¸ï¼‰

**æ®‹å­˜ã™ã‚‹å…±é€šåˆ¶ç´„:**
- fal.aiå‡¦ç†æ™‚é–“ï¼ˆ1å‹•ç”»12åˆ†ã¯ç‰©ç†çš„åˆ¶ç´„ï¼‰
- ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç™»éŒ²ï¼ˆCAPTCHAç­‰ã¯äººæ‰‹ãŒå¿…è¦ï¼‰
- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å“è³ªã®å¸‚å ´é©åˆï¼ˆå®Ÿãƒ‡ãƒ¼ã‚¿ã§æ¤œè¨¼ã™ã‚‹ã—ã‹ãªã„ï¼‰

### 2026-02-13: ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„é‡ã®é–¢ä¿‚æ€§åˆ†æ

**Why:** KPIé”æˆå¯èƒ½æ€§åˆ†æï¼ˆv1/v2ï¼‰ã§ã€Œè¨±å®¹ã™ã¹ãä¸ç¢ºå®Ÿæ€§ã€ã¨ã—ã¦ã„ãŸã€Œã‚³ãƒ³ãƒ†ãƒ³ãƒ„æ•°ã«æ¯”ä¾‹ã—ã¦ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®çš„ä¸­ç‡ãŒä¸ŠãŒã‚‹ã€ã¨ã„ã†å‰æã®æ¤œè¨¼ãŒå¿…è¦ã€‚ã“ã®å‰æãŒæ­£ã—ããªã„å ´åˆã€KPIæˆ¦ç•¥å…¨ä½“ã®è¦‹ç›´ã—ãŒå¿…è¦ã«ãªã‚‹ã€‚

**What was done:**

- **`docs/ALGORITHM-CONTENT-VOLUME-ANALYSIS.md`** æ–°è¦ä½œæˆï¼ˆç´„600è¡Œã€æ—¥æœ¬èªï¼‰
  - 4ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ï¼ˆYouTube Shorts / TikTok / Instagram Reels / Xï¼‰ã®æœ€æ–°ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ç¶²ç¾…çš„ã«èª¿æŸ»
  - Bufferç¤¾1,140ä¸‡æŠ•ç¨¿åˆ†æã€Metricoolç¤¾Reelså¹´æ¬¡æ¯”è¼ƒã€NexLev 9,414ãƒãƒ£ãƒ³ãƒãƒ«åˆ†æç­‰ã®ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‚’ä½¿ç”¨
  - 9ã‚»ã‚¯ã‚·ãƒ§ãƒ³æ§‹æˆ: ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼ / å‰ææ¤œè¨¼ / ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ¥åˆ†æ / AIç”Ÿæˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ãƒãƒ³ãƒ‡ã‚£ã‚­ãƒ£ãƒƒãƒ— / æˆé•·æ›²ç·šã®æ•°å­¦ãƒ¢ãƒ‡ãƒ« / ãƒšãƒŠãƒ«ãƒ†ã‚£ãƒªã‚¹ã‚¯ / KPIå‰æã¸ã®å½±éŸ¿ / æ¨å¥¨æˆ¦ç•¥ / çµè«–

**ä¸»è¦ãªç™ºè¦‹:**

1. **ã€Œé‡ âˆ çš„ä¸­ç‡ã€ã¯èª¤ã‚Š** â€” å„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯ç‹¬ç«‹ã«è©•ä¾¡ã•ã‚Œã‚‹ã€‚é‡ã¯ã€Œå®ãã˜ã®æšæ•°ã€ã‚’å¢—ã‚„ã™ã ã‘ã§ã€1æšã‚ãŸã‚Šã®å½“é¸ç¢ºç‡ã¯å¤‰ã‚ã‚‰ãªã„
2. **é–¢ä¿‚ã¯å¯¾æ•°çš„ï¼ˆlogarithmicï¼‰** â€” TikTok 1,140ä¸‡ä»¶åˆ†æ: æŠ•ç¨¿é »åº¦ã‚’11å€ã«ã—ã¦ã‚‚ä¸­å¤®å€¤è¦–è´æ•°ã¯æ¨ªã°ã„ï¼ˆ489â†’459ï¼‰
3. **å“è³ªãŒé‡ã‚’åœ§å€’** â€” å®Œè¦–è´ç‡60%ã§1æœ¬/æ—¥ > å®Œè¦–è´ç‡20%ã§3æœ¬/æ—¥ã€‚å…¨ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§70%ä»¥ä¸Šã®å®Œè¦–è´ç‡ãŒãƒã‚¤ãƒ©ãƒ«ãƒˆãƒªã‚¬ãƒ¼
4. **AIç”Ÿæˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®æˆåŠŸç‡: 0.2ã€œ0.3%** â€” ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆç‡ã¯äººé–“ã®åŠåˆ†ä»¥ä¸‹ï¼ˆ1.8ã€œ2.5% vs 4.1%ï¼‰
5. **STRATEGY.mdã®ã‚¤ãƒ³ãƒ—ãƒ¬ãƒƒã‚·ãƒ§ãƒ³æƒ³å®šã¯10ã€œ100å€ã®éå¤§è©•ä¾¡** â€” æ–°è¦ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåˆæœˆã®TikTokä¸­å¤®å€¤ã¯489ï¼ˆæƒ³å®š15,000ï¼‰

**KPIæˆ¦ç•¥ã¸ã®æè¨€:** ã€Œ3,500ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®é‡ç”£ã€â†’ã€Œå°‘æ•°ã®é«˜å“è³ªã‚¢ã‚«ã‚¦ãƒ³ãƒˆè‚²æˆ â†’ æˆåŠŸãƒ‘ã‚¿ãƒ¼ãƒ³ã®æ¨ªå±•é–‹ã€ã¸ã®ã‚·ãƒ•ãƒˆã‚’æ¨å¥¨

### 2026-02-13: Pipeline GUI E2Eæ¤œè¨¼ & ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´åˆæ€§ä¿®æ­£

**Why:** å‰å›ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼ˆ2026-02-12ï¼‰ã§å®Ÿè£…ã—ãŸPipeline GUIå®Ÿè¡Œæ©Ÿèƒ½ã®å®Ÿæ©Ÿæ¤œè¨¼ã¨ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ•´åˆæ€§ç¢ºèªãƒ»ä¿®æ­£ã€‚

**E2Eãƒ†ã‚¹ãƒˆçµæœ:**
- PM2ã‚¦ã‚©ãƒƒãƒãƒ£ãƒ¼: 17æ™‚é–“ç¨¼åƒä¸­ã€ãƒªã‚¹ã‚¿ãƒ¼ãƒˆ0å›ã€ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ç©º
- Dry Run ãƒ†ã‚¹ãƒˆ: productionã‚¿ãƒ–ã«ãƒ†ã‚¹ãƒˆè¡Œã‚’è¿½åŠ  â†’ `queued_dry` è¨­å®š â†’ ã‚¦ã‚©ãƒƒãƒãƒ£ãƒ¼ãŒ30ç§’ä»¥å†…ã«æ¤œå‡º â†’ å…¨5ã‚¹ãƒ†ãƒƒãƒ—å®Œäº†ï¼ˆ1ç§’ï¼‰â†’ `dry_run_complete` ã«è‡ªå‹•æ›´æ–°
- ç™ºè¦‹ã—ãŸå•é¡Œ: motionsã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªã« `MOT_0001` ã®ã¿ç™»éŒ²ã€‚`MOT_0002`/`MOT_0003` ã¯å­˜åœ¨ã›ãšã€Row 2ã®æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã¯å†å®Ÿè¡Œä¸å¯ã€‚ã“ã‚Œã¯ãƒ‡ãƒ¼ã‚¿ï¼ˆäººé–“ã®ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªç™»éŒ²ï¼‰ã®å•é¡Œã§ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰ã®ãƒã‚°ã§ã¯ãªã„ã€‚

**ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¿®æ­£:**
- `OPERATIONS.md`: æœ€çµ‚æ›´æ–°æ—¥ä¿®æ­£ï¼ˆ2026-02-10â†’2026-02-13ï¼‰ã€æ¦‚è¦ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å®Ÿè¡Œæ–¹æ³•ã‚’GUIåæ˜ ã€motion IDã®ä¾‹ã‚’MOT_0001ã«çµ±ä¸€ï¼ˆå­˜åœ¨ã—ãªã„IDã®ä¾‹ç¤ºã‚’ä¿®æ­£ï¼‰
- `ARCHITECTURE.md`: æœ€çµ‚æ›´æ–°æ—¥ä¿®æ­£ï¼ˆ2026-02-10â†’2026-02-13ï¼‰
- `CONTEXT.md`: Files in Repositoryã‚»ã‚¯ã‚·ãƒ§ãƒ³ã« `PipelineUI.gs`, `watch-pipeline.js`, `ecosystem.config.js` è¿½åŠ ã€‚ãƒ†ã‚¹ãƒˆæ•°ã‚’æœ€æ–°å€¤ã«æ›´æ–°ï¼ˆGAS 343/10 suites, Pipeline 33/1 suiteï¼‰

### 2026-02-13: script_language ã‚«ãƒ©ãƒ è¿½åŠ  â€” EN/JP å‹•çš„ã‚¹ã‚¯ãƒªãƒ—ãƒˆé¸æŠ

**Why:** ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãŒå¸¸ã« `script_en` ã‚’ä½¿ç”¨ã—ã¦ã„ãŸãŸã‚ã€æ—¥æœ¬èªã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆtarget_region=JPï¼‰ã§ã‚‚è‹±èªéŸ³å£°ã—ã‹ç”Ÿæˆã§ããªã‹ã£ãŸã€‚`script_language` ã‚«ãƒ©ãƒ ã‚’è¿½åŠ ã—ã€production ã‚¿ãƒ–ã‹ã‚‰å‹•çš„ã« EN/JP ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚

**What was done:**

- **production ã‚¿ãƒ–æ‹¡å¼µ** (32ã‚«ãƒ©ãƒ  â†’ 33ã‚«ãƒ©ãƒ ):
  - æ–°ã‚«ãƒ©ãƒ  `script_language` ã‚’ `voice_id` ã®å¾Œï¼ˆ#13ï¼‰ã«æŒ¿å…¥
  - å€¤: `en` ã¾ãŸã¯ `jp`ï¼ˆãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚³ãƒ¼ãƒ‰ã§ã¯ç©ºã®å ´åˆ `en` ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰
  - GAS ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨ã—ã¦æ‰±ã†ï¼ˆ`PRODUCTION_REQUIRED_FIELDS` ã«è¿½åŠ ï¼‰
  - ä»¥é™ã®å…¨ã‚«ãƒ©ãƒ ç•ªå·ãŒ +1 ã‚·ãƒ•ãƒˆï¼ˆ`pipeline_status` ãŒ #13 â†’ #14 ç­‰ï¼‰

- **ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚³ãƒ¼ãƒ‰å¤‰æ›´**:
  - `production-manager.js`: HEADERS ã« `script_language` è¿½åŠ ï¼ˆ33ã‚«ãƒ©ãƒ ï¼‰
  - `inventory-reader.js`: `resolveProductionRow()` ã§ `script_language` ã‚’èª­ã¿å–ã‚Šã€`en`/`jp` ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€`scriptLanguage` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨ã—ã¦è¿”å´
  - `orchestrator.js`: ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸ `script_en` â†’ å‹•çš„ãª `script_${scriptLanguage}` ã«å¤‰æ›´ã€‚`section.scenario[scriptKey]` ã§ã‚¹ã‚¯ãƒªãƒ—ãƒˆå–å¾—

- **GAS å¤‰æ›´**:
  - `Config.gs`: `PRODUCTION_REQUIRED_FIELDS` ã« `script_language` è¿½åŠ ï¼ˆ9ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼‰

- **ãƒ†ã‚¹ãƒˆè¿½åŠ ** (33 â†’ 36 pipeline tests):
  - Test: production-manager HEADERS ãŒ 33 ã‚«ãƒ©ãƒ ã§ã‚ã‚‹ã“ã¨
  - Test: orchestrator ãŒå‹•çš„ `scriptKey` ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨
  - Test: inventory-reader ãŒ `script_language` ã‚’ `en`/`jp` ã§ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹ã“ã¨

- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°**:
  - README.md: production ã‚¿ãƒ–ã‚¹ã‚­ãƒ¼ãƒã« script_language è¿½åŠ ã€ã‚«ãƒ©ãƒ ç•ªå·å†æ¡ç•ªã€32â†’33
  - ARCHITECTURE.md: 32â†’33ã‚«ãƒ©ãƒ ã€TTSèª¬æ˜ã« script_language é¸æŠã‚’è¿½è¨˜
  - OPERATIONS.md: ã‚·ãƒŠãƒªã‚ªèª¬æ˜ãƒ»åˆ¶ä½œè¡Œãƒ†ãƒ¼ãƒ–ãƒ«ã« script_language è¿½åŠ 
  - account-design-guide.md: åœ°åŸŸÃ—è¨€èªãƒ†ãƒ¼ãƒ–ãƒ«ãƒ»productionè¡Œãƒ†ãƒ¼ãƒ–ãƒ«ã« script_language è¿½åŠ 
  - STRATEGY.md, KPI-FEASIBILITY-ANALYSIS.md: 32â†’33ã‚«ãƒ©ãƒ 

**Files changed:**
- Modified: `pipeline/orchestrator.js`, `pipeline/sheets/inventory-reader.js`, `pipeline/sheets/production-manager.js`, `gas/Config.gs`
- Modified (tests): `tests/pipeline.test.js`, `gas/tests/setup.js`, `gas/tests/PipelineUI.test.js`
- Modified (docs): `README.md`, `CONTEXT.md`, `docs/ARCHITECTURE.md`, `docs/STRATEGY.md`, `docs/manuals/OPERATIONS.md`, `docs/manuals/account-design-guide.md`, `docs/KPI-FEASIBILITY-ANALYSIS.md`

**Test results:** 379 tests passing (343 GAS / 10 suites + 36 pipeline / 1 suite)

### 2026-02-13: ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥ä¿®æ­£ â€” æ¯ãƒãƒ¼ãƒªãƒ³ã‚°æœ€æ–°å–å¾—

**Why:** watch-pipeline.js ãŒã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªãƒ‡ãƒ¼ã‚¿ã‚’ãƒ—ãƒ­ã‚»ã‚¹èµ·å‹•æ™‚ã«1å›ã ã‘ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ã€ä»¥é™ã¯å†èª­ã¿è¾¼ã¿ã—ãªã‹ã£ãŸã€‚ãã®ãŸã‚ã€ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªã‚·ãƒ¼ãƒˆã«æ–°ã—ã„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã€ã‚·ãƒŠãƒªã‚ªã€ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ï¼‰ã‚’è¿½åŠ ã—ã¦ã‚‚ã€watcher ã‚’å†èµ·å‹•ã—ãªã„é™ã‚Šåæ˜ ã•ã‚Œãªã‹ã£ãŸã€‚

**What was done:**

- `scripts/watch-pipeline.js`: `clearCache` ã‚’ import ã«è¿½åŠ ã€`pollOnce()` ã®å…ˆé ­ã§æ¯å› `clearCache()` ã‚’å‘¼ã³å‡ºã—
- ã“ã‚Œã«ã‚ˆã‚Šæ¯ãƒãƒ¼ãƒªãƒ³ã‚°ï¼ˆ30ç§’ã”ã¨ï¼‰ã« motions/scenarios/characters ã®3ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒã‚¯ãƒªã‚¢ã•ã‚Œã€`resolveProductionRow()` å®Ÿè¡Œæ™‚ã«å„ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªã‚·ãƒ¼ãƒˆã‹ã‚‰æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—

**å½±éŸ¿:**
- ä»Šå¾Œã¯ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªã‚·ãƒ¼ãƒˆã«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’è¿½åŠ ã—ãŸéš›ã€watcher å†èµ·å‹•ä¸è¦ã§è‡ªå‹•çš„ã«åæ˜ ã•ã‚Œã‚‹
- Google Sheets API ã®å‘¼ã³å‡ºã—å›æ•°ã¯å¢—åŠ ã™ã‚‹ãŒã€ãƒãƒ¼ãƒªãƒ³ã‚°é–“éš”ï¼ˆ30ç§’ï¼‰ã§ååˆ†ãªãƒ¬ãƒ¼ãƒˆå†…

**Commit:** `be2eb62`

### 2026-02-13: Kling ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå»¶é•· & ãƒªãƒˆãƒ©ã‚¤æ”¹å–„ + Characters Inventory ç”»åƒãƒ‡ãƒ¼ã‚¿ç™»éŒ²

**Why:** VID_202602_0002 ã®æœ¬ç•ªãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å®Ÿè¡Œæ™‚ã« body ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã® Kling å‹•ç”»ç”Ÿæˆï¼ˆ`fal-ai/kling-video/v2.6/standard/motion-control`ï¼‰ãŒ fal.ai ã®ã‚­ãƒ¥ãƒ¼æ··é›‘ã«ã‚ˆã‚Š 10åˆ†ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã§å¤±æ•—ã€‚ã¾ãŸ Characters Inventory ã® `file_link`/`drive_file_id` ãŒæœªç™»éŒ²ã§ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãŒã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç”»åƒã‚’å–å¾—ã§ããªã‹ã£ãŸã€‚

**What was done:**

- **Kling ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå»¶é•·** (`pipeline/media/video-generator.js`):
  - `submitAndWait` ã« `timeout: 1800000`ï¼ˆ30åˆ†ï¼‰ã‚’æ˜ç¤ºæŒ‡å®šï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ10åˆ†ã§ã¯ä¸è¶³ï¼‰

- **ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚’ãƒªãƒˆãƒ©ã‚¤å¯¾è±¡ã«è¿½åŠ ** (`pipeline/media/fal-client.js`):
  - `err.message.includes('timed out')` ã‚’ãƒªãƒˆãƒ©ã‚¤æ¡ä»¶ã«è¿½åŠ 
  - ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆç™ºç”Ÿæ™‚ã‚‚æœ€å¤§3å›ãƒªãƒˆãƒ©ã‚¤ã™ã‚‹ã‚ˆã†ã«æ”¹å–„

- **Characters Inventory ç”»åƒãƒ‡ãƒ¼ã‚¿ç™»éŒ²**:
  - Drive `Characters/Images/` ãƒ•ã‚©ãƒ«ãƒ€å†…ã® CHR_0001ã€œCHR_0012 ã‚µãƒ–ãƒ•ã‚©ãƒ«ãƒ€ã‹ã‚‰ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç‰¹å®š
  - Eåˆ—ï¼ˆ`file_link`ï¼‰: 12è¡Œã« Google Drive URL ã‚’è¨˜å…¥
  - Kåˆ—ï¼ˆ`drive_file_id`ï¼‰: 12è¡Œã«ç”Ÿã®ãƒ•ã‚¡ã‚¤ãƒ«IDã‚’è¨˜å…¥
  - ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¯ `drive_file_id` ã‚’å„ªå…ˆä½¿ç”¨ã€ãªã‘ã‚Œã° `file_link` ã‹ã‚‰IDã‚’æ­£è¦è¡¨ç¾ã§æŠ½å‡ºï¼ˆ`orchestrator.js` L68-74ï¼‰

**Commits:** `be2eb62` (cache fix), `56c92c8` (CONTEXT.md), `6ec4189` (timeout + retry)

### Session: 2026-02-13 â€” é»’ãƒ•ãƒ¬ãƒ¼ãƒ ä¿®æ­£ï¼ˆffmpeg concat å†ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ + æ¤œè¨¼ï¼‰

**å•é¡Œ**: çµåˆå‹•ç”»ã®å…ˆé ­ ~0.1ç§’ã«é»’ãƒ•ãƒ¬ãƒ¼ãƒ ãŒç™ºç”Ÿã€‚
**æ ¹æœ¬åŸå› **: ffmpeg `-c copy` concat demuxer ãŒã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’ãƒªãƒãƒƒãƒ—ã›ãšã€`start_time=0.023s` ã®ã‚ªãƒ•ã‚»ãƒƒãƒˆãŒæ®‹ã‚‹ã€‚ãƒ—ãƒ¬ãƒ¼ãƒ¤ãƒ¼ã¯ 0sã€œ0.023s ã®é–“ã‚’é»’ã§è¡¨ç¤ºã™ã‚‹ã€‚

**ä¿®æ­£å†…å®¹**:
- **`pipeline/media/concat.js`**: concat demuxer + `-c copy` â†’ filter_complex + H.264 å†ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰æ–¹å¼ã«å¤‰æ›´
  - `[0:v][0:a][1:v][1:a]...concat=n=N:v=1:a=1` ãƒ•ã‚£ãƒ«ã‚¿ã§å‹•çš„ã«ã‚¯ãƒªãƒƒãƒ—æ•°å¯¾å¿œ
  - `-c:v libx264 -preset medium -crf 18 -pix_fmt yuv420p -c:a aac -b:a 192k -movflags +faststart`
  - ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ 60s â†’ 180sï¼ˆå†ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã®ãŸã‚ï¼‰
  - æ–°è¦ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ: `detectBlackFrames(buffer)` â€” blackdetect ãƒ•ã‚£ãƒ«ã‚¿ã§é»’ãƒ•ãƒ¬ãƒ¼ãƒ æ¤œå‡º
  - æ–°è¦ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ: `trimBlackStart(buffer, duration)` â€” å…ˆé ­ã®é»’ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’ãƒˆãƒªãƒ 
- **`pipeline/orchestrator.js`**: Step 3 ã«é»’ãƒ•ãƒ¬ãƒ¼ãƒ æ¤œè¨¼ã‚¹ãƒ†ãƒƒãƒ—è¿½åŠ 
  - `validating_video` ãƒ•ã‚§ãƒ¼ã‚º: blackdetect â†’ å…ˆé ­é»’ãƒ•ãƒ¬ãƒ¼ãƒ è‡ªå‹•ãƒˆãƒªãƒ  â†’ å†æ¤œè¨¼ â†’ Driveä¿å­˜
  - ä¸­é–“ã®é»’ãƒ•ãƒ¬ãƒ¼ãƒ ã¯WARNINGãƒ­ã‚°ï¼ˆãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¯åœæ­¢ã—ãªã„ï¼‰
- **`tests/pipeline.test.js`**: 38ãƒ†ã‚¹ãƒˆï¼ˆ+3æ–°è¦ï¼‰
  - Test 9: `detectBlackFrames`, `trimBlackStart` ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆç¢ºèª
  - Test 11b: blackdetect ãŒé»’ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’æ¤œå‡ºã™ã‚‹ãƒ†ã‚¹ãƒˆ
  - Test 11c: filter_complex å†ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰æ–¹å¼ã®ç¢ºèª
  - Test 14: orchestrator ã« `detectBlackFrames`, `trimBlackStart` å‚ç…§ç¢ºèª
- **`docs/ARCHITECTURE.md`**: Step 4 èª¬æ˜æ›´æ–°ã€mermaidå›³ã« blackdetect æ¤œè¨¼ã‚¹ãƒ†ãƒƒãƒ—è¿½åŠ 
- **æ—¢å­˜å‹•ç”»ä¿®æ­£**: VID_202602_0001ã€œ0003 ã‚’ `setpts=PTS-STARTPTS` ã§å†ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ï¼ˆstart_time 0.023s â†’ 0.000sï¼‰ã€Drive ä¸Šã§ãƒ•ã‚¡ã‚¤ãƒ«IDä¿æŒã®ã¾ã¾å·®ã—æ›¿ãˆ

### Session: 2026-02-13 â€” ç”»åƒã‚µã‚¤ã‚ºè¶…é & voice_id ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ä¿®æ­£

**å•é¡Œ**:
- Row 6 (VID_202602_0005, CHR_0007): `Unprocessable Entity: [object Object]` â€” ç”»åƒ 3840x6832 ãŒ Kling ã® 3850x3850 ä¸Šé™ã‚’è¶…é
- Row 9 (VID_202602_0008, CHR_0010): `Fish Audio TTS failed (400): Reference not found` â€” voice_id `4cf4237e99a4d78999fe05acad79a60` ãŒ31æ–‡å­—ï¼ˆæ­£ã—ãã¯32æ–‡å­—hexï¼‰

**ä¿®æ­£å†…å®¹**:
- **`pipeline/orchestrator.js`**: `resizeImageIfNeeded()` é–¢æ•°è¿½åŠ ã€‚ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç”»åƒãŒ 3850px ã‚’è¶…ãˆã‚‹å ´åˆã€ffmpeg ã§è‡ªå‹•ãƒªã‚µã‚¤ã‚ºã—ã¦ã‹ã‚‰fal.storageã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
- **`pipeline/media/fal-client.js`**: ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã® enrichment ä¿®æ­£ã€‚`err.body.detail` ãŒé…åˆ—ã®å ´åˆ `JSON.stringify` ã§æ–‡å­—åˆ—åŒ–ï¼ˆ`[object Object]` è¡¨ç¤ºãƒã‚°ä¿®æ­£ï¼‰
- **`pipeline/sheets/inventory-reader.js`**: voice_id ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å¼·åŒ–ã€‚32æ–‡å­—hex æ­£è¦è¡¨ç¾ãƒã‚§ãƒƒã‚¯è¿½åŠ ï¼ˆä¸æ­£ãª voice_id ã‚’æ—©æœŸæ¤œå‡ºã—ã¦ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ”¹å–„ï¼‰

**Note**: Row 9 ã® voice_id ã¯ production ã‚·ãƒ¼ãƒˆå´ã®ãƒ‡ãƒ¼ã‚¿å•é¡Œï¼ˆ31æ–‡å­—ï¼‰ã€‚æ­£ã—ã„32æ–‡å­—hex IDã«ä¿®æ­£ãŒå¿…è¦ã€‚

- **`scripts/watch-pipeline.js`**: `resolveProductionRow` ã‚¨ãƒ©ãƒ¼æ™‚ã‚‚ã‚·ãƒ¼ãƒˆã‚’ `error` ã«æ›´æ–°ã™ã‚‹ã‚ˆã†ä¿®æ­£ã€‚ä»¥å‰ã¯ `runSingleJob` ã®å‰ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ã¨ `queued` ã®ã¾ã¾ç„¡é™ãƒ«ãƒ¼ãƒ—ã—ã¦ã„ãŸã€‚
- **`pipeline/orchestrator.js`**: `trimVideoIfNeeded()` é–¢æ•°è¿½åŠ ã€‚ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³å‚ç…§å‹•ç”»ãŒ30ç§’ã‚’è¶…ãˆã‚‹å ´åˆã€ffmpeg ã§å…ˆé ­30ç§’ã«è‡ªå‹•ãƒˆãƒªãƒ ã—ã¦ã‹ã‚‰fal.storageã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆKling motion-control ã®ä¸Šé™: 30sï¼‰ã€‚
  - Row 8 (MOT_0008: 209s) ã¨ Row 11 (MOT_0008: 209s) ã®ã‚¨ãƒ©ãƒ¼ã‚’è§£æ±ºã€‚
  - Motions Inventory å…¨ä½“ã§ body ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³12æœ¬ä¸­9æœ¬ãŒ30ç§’è¶…ï¼ˆæœ€å¤§209sï¼‰ã€‚å…¨ã¦ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å´ã§è‡ªå‹•å¯¾å¿œã€‚

### Session: 2026-02-14 â€” ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ä¸¦åˆ—åŒ– + çŸ­å°ºãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³è‡ªå‹•ãƒ«ãƒ¼ãƒ—

**å•é¡Œ**:
1. watcher ãŒ1ã‚¸ãƒ§ãƒ–ãšã¤é€æ¬¡å‡¦ç†ã§ã€1å‹•ç”»20åˆ†Ã—å¤šæ•°è¡Œã®ãƒ‡ãƒƒãƒ‰ãƒ©ã‚¤ãƒ³ã«é–“ã«åˆã‚ãªã„
2. ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³å‹•ç”»ãŒ3ç§’æœªæº€ï¼ˆKlingæœ€å°3sï¼‰ã®ã‚‚ã®ãŒ7è¡Œã‚¨ãƒ©ãƒ¼ï¼ˆRow 26-31, 33ï¼‰

**ä¿®æ­£å†…å®¹**:
- **`scripts/watch-pipeline.js`**: é€æ¬¡å‡¦ç† â†’ æœ€å¤§5ã‚¸ãƒ§ãƒ–åŒæ™‚ä¸¦åˆ—å‡¦ç†
  - `processing` boolean â†’ `activeJobs` Mapï¼ˆvideo_id â†’ Promiseï¼‰ã§è¤‡æ•°ã‚¸ãƒ§ãƒ–ã‚’è¿½è·¡
  - `getQueuedRows(1)` â†’ `getQueuedRows(MAX_CONCURRENT - activeJobs.size)` ã§ç©ºãã‚¹ãƒ­ãƒƒãƒˆåˆ†ã ã‘å–å¾—
  - `pollOnce()`: ç©ºãã‚¹ãƒ­ãƒƒãƒˆãŒã‚ã‚‹ã¨ãã®ã¿ãƒãƒ¼ãƒªãƒ³ã‚°ã€æ—¢ã«å‡¦ç†ä¸­ã® video_id ã¯ã‚¹ã‚­ãƒƒãƒ—
  - ã‚°ãƒ¬ãƒ¼ã‚¹ãƒ•ãƒ«ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³: `Promise.allSettled` ã§å…¨ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¸ãƒ§ãƒ–ã®å®Œäº†ã‚’å¾…æ©Ÿ
- **`ecosystem.config.js`**: `MAX_CONCURRENT: 5` ã‚’ env ã«è¿½åŠ 
- **`pipeline/orchestrator.js`**: `trimVideoIfNeeded(buffer, max, min=3)` ã‚’æ‹¡å¼µ
  - 3ç§’æœªæº€: ffmpeg `-stream_loop` ã§ãƒ«ãƒ¼ãƒ—å†ç”Ÿ â†’ `-t 3` ã§3ç§’ã«åˆ‡ã‚Šè©°ã‚ï¼ˆH.264å†ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ï¼‰
  - 30ç§’è¶…: å¾“æ¥é€šã‚Š `-c copy` ã§ãƒˆãƒªãƒ 
  - JSDocæ›´æ–°: "3-30s" ç¯„å›²å¯¾å¿œã‚’æ˜è¨˜
- **`tests/pipeline.test.js`**: watcher ãƒ†ã‚¹ãƒˆã« `MAX_CONCURRENT`/`activeJobs` ç¢ºèªè¿½åŠ ã€ecosystem ãƒ†ã‚¹ãƒˆã« `MAX_CONCURRENT=5` è¿½åŠ 

**ä¸¦åˆ—å‡¦ç†ã®åˆ¶ç´„è¦å› **:
- fal.ai: ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå˜ä½ã®åŒæ™‚å‡¦ç†æ•°åˆ¶é™ï¼ˆ5ä¸¦åˆ—ã§30åŒæ™‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼‰
- Fish Audio TTS: Plus ãƒ—ãƒ©ãƒ³ã®ãƒ¬ãƒ¼ãƒˆåˆ¶é™
- Google Sheets API: 60 write/min/userï¼ˆ5ä¸¦åˆ—ã§~25å›/min â†’ å®‰å…¨åœï¼‰
- ãƒ¡ãƒ¢ãƒª: 5ä¸¦åˆ—ã§~1GBï¼ˆVM ã‚¹ãƒšãƒƒã‚¯å†…ï¼‰
- **æ¨å¥¨ä¸Šé™: 5**ï¼ˆ8ä»¥ä¸Šã¯Sheets APIã‚¯ã‚©ãƒ¼ã‚¿è¶…ãˆãƒªã‚¹ã‚¯ï¼‰

**Commit:** `63aab64`

### Session: 2026-02-14 â€” ffmpeg concat ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆä¿®æ­£

**å•é¡Œ**: 5ã‚¸ãƒ§ãƒ–åŒæ™‚ä¸¦åˆ—å‡¦ç†æ™‚ã€ffmpeg concatï¼ˆH.264å†ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ï¼‰ãŒè¤‡æ•°åŒæ™‚å®Ÿè¡Œã•ã‚Œã‚‹ã¨CPUç«¶åˆã§ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼ˆ180ç§’ï¼‰ã‚’è¶…éã€‚8æœ¬ãŒconcatã‚¨ãƒ©ãƒ¼ã§å¤±æ•—ï¼ˆVID_202602_0010, 0021, 0022, 0031, 0032, 0034, 0035, 0036ï¼‰ã€‚

**æ ¹æœ¬åŸå› **: `preset: medium` ã¯ 0.11x ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€Ÿåº¦ï¼ˆ3fpsï¼‰ã€‚20ç§’ã®å‹•ç”»ã«ç´„180ç§’ã‹ã‹ã‚Šã€5ã‚¸ãƒ§ãƒ–åŒæ™‚CPUç«¶åˆã§180ç§’ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚’è¶…éã€‚

**ä¿®æ­£å†…å®¹**:
- **`pipeline/media/concat.js`**:
  - `preset: medium` â†’ `preset: fast` â€” ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰é€Ÿåº¦2-3å€å‘ä¸Šã€çŸ­å°ºå‹•ç”»ã§ã¯å“è³ªå·®ãªã—
  - `timeout: 180000` â†’ `timeout: 600000` â€” å®‰å…¨ãƒãƒ¼ã‚¸ãƒ³ç¢ºä¿ï¼ˆ180ç§’â†’600ç§’ï¼‰

**å‡¦ç†çµæœï¼ˆã“ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³å…¨ä½“ï¼‰**:
- æˆåŠŸï¼ˆ10æœ¬ï¼‰: VID_202602_0007, 0019, 0023, 0024, 0025, 0026, 0027, 0028, 0029, 0030
- concat ã‚¨ãƒ©ãƒ¼ï¼ˆ8æœ¬ã€ä¿®æ­£å‰ã«ç™ºç”Ÿï¼‰: VID_202602_0010, 0021, 0022, 0031, 0032, 0034, 0035, 0036
  - ã“ã‚Œã‚‰ã¯ä¿®æ­£å¾Œã®ã‚³ãƒ¼ãƒ‰ã§å†ã‚­ãƒ¥ãƒ¼ã™ã‚Œã°å‡¦ç†å¯èƒ½

**Test results:** 38 pipeline tests passing

### Session: 2026-02-14ã€œ15 â€” XæŠ•ç¨¿36æœ¬ç”Ÿæˆ + Driveæ•´ç† + ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆå†æ§‹æˆ

**Why:** Phase 2 ã® X ã‚¢ã‚«ã‚¦ãƒ³ãƒˆé‹ç”¨ã«å‘ã‘ã¦ã€12ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ Ã— 3æ—¥åˆ†ï¼ˆ2/14, 2/15, 2/16ï¼‰= 36æœ¬ã® X æŠ•ç¨¿ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ä¸€æ‹¬ç”Ÿæˆã™ã‚‹å¿…è¦ãŒã‚ã£ãŸã€‚

**What was done:**

- **XæŠ•ç¨¿36æœ¬ç”Ÿæˆï¼ˆAgent Teamæ–¹å¼ï¼‰**:
  - 3ã¤ã®ãƒãƒƒãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼ˆbatch-a, batch-b, batch-cï¼‰ã§12ã‚­ãƒ£ãƒ©ã‚’4ã‚­ãƒ£ãƒ©ãšã¤ä¸¦åˆ—å‡¦ç†
  - å„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ: ã‚­ãƒ£ãƒ©è¨­å®šèª­ã¿è¾¼ã¿ â†’ ç«¶åˆèª¿æŸ»ï¼ˆWebSearchï¼‰â†’ æŠ•ç¨¿ã®å‹åˆ†æ â†’ ãƒˆãƒ¬ãƒ³ãƒ‰åé›† â†’ æŠ•ç¨¿ç”Ÿæˆ
  - 1ã‚­ãƒ£ãƒ©3æŠ•ç¨¿ Ã— 12ã‚­ãƒ£ãƒ© = 36æŠ•ç¨¿ã‚’å®Œæˆ
  - å“è³ªãƒã‚§ãƒƒã‚¯: ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ï¼ˆAIDA/PAS/BAB/PASONAï¼‰ã€ãƒ•ãƒƒã‚¯å‹ã€æ„Ÿæƒ…ãƒˆãƒªã‚¬ãƒ¼ã€å¿ƒç†ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã®å¤šæ§˜æ€§ã‚’ç¢ºèª
  - JP 9ã‚­ãƒ£ãƒ© + EN 3ã‚­ãƒ£ãƒ©ï¼ˆç¾å¥³ãƒ›ã‚¹ãƒˆã€è‡ªä¿¡MAXã‚»ãƒ¬ãƒ–ã€AI_Toolãƒ†ãƒƒã‚¯ãƒŸãƒ¥ãƒ¼ã‚ºï¼‰

- **ç®¡ç†ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆä½œæˆ** (ID: `1pWqXHckZWoTuTQ1r1hqnmr57ioo5aQ8ZTSRntzMHJ08`):
  - ã‚¿ã‚¤ãƒˆãƒ«: "XæŠ•ç¨¿ç®¡ç† 2026å¹´2æœˆ14-16æ—¥ (36æŠ•ç¨¿)"
  - æœ€çµ‚æ§‹æˆï¼ˆ2ã‚¿ãƒ–ï¼‰:
    - **æŠ•ç¨¿ã‚¿ã‚¹ã‚¯**: ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼å‘ã‘ãƒ¡ã‚¤ãƒ³ã‚¿ãƒ–ï¼ˆ36è¡Œã€æ™‚ç³»åˆ—ã‚½ãƒ¼ãƒˆã€ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ä»˜ãï¼‰
    - **å…¨æŠ•ç¨¿ãƒ‡ãƒ¼ã‚¿**: å…¨18åˆ—ã®ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚¿ãƒ–
  - æŠ•ç¨¿ã‚¿ã‚¹ã‚¯åˆ—: æŠ•ç¨¿æ¸ˆã¿(checkbox) / æŠ•ç¨¿äºˆå®šæ—¥ / æ¨å¥¨æŠ•ç¨¿æ™‚é–“ / ã‚­ãƒ£ãƒ©å / ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ(ç©ºæ¬„) / æŠ•ç¨¿æœ¬æ–‡ / ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚° / CTA / æŠ•ç¨¿ID
  - æ—¥ä»˜ã”ã¨è‰²åˆ†ã‘: 2/14=æ°´è‰²ã€2/15=è–„ç·‘ã€2/16=è–„é»„è‰²
  - ãƒ˜ãƒƒãƒ€ãƒ¼å›ºå®šã€æŠ•ç¨¿æœ¬æ–‡ãƒ†ã‚­ã‚¹ãƒˆæŠ˜ã‚Šè¿”ã—
  - å‚è€ƒã«ã—ãŸãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ: å‹•ç”»æŠ•ç¨¿ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ« (ID: `1f9cB4EZU2eDsa-ibjyht6FQZkPqiIPgfGgPFYxl6AM4`)

- **Driveãƒ•ã‚©ãƒ«ãƒ€æ•´ç†**:
  - æ–°ãƒ•ã‚©ãƒ«ãƒ€ `03_XæŠ•ç¨¿_å…¨12ã‚­ãƒ£ãƒ©_2026å¹´2æœˆ14-16æ—¥` ã‚’ä½œæˆ (ID: `1tR4IJU3_ROOkNARNh5Jf1MELa14LJTBF`)
  - è¦ªãƒ•ã‚©ãƒ«ãƒ€: ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æƒ…å ± (ID: `1SWJV-3nZfotIJuPna6tf1ERhLrqUB8lq`)
  - ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ9ç‚¹ï¼‰:
    - XæŠ•ç¨¿ç®¡ç†ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆï¼ˆç§»å‹•ï¼‰
    - all_posts.json (54KB), all_posts.csv (39KB)
    - research_batch-a/b/c.mdï¼ˆèª¿æŸ»çµæœ Ã— 3ï¼‰
    - quality_review_batch-a/b/c.mdï¼ˆå“è³ªãƒã‚§ãƒƒã‚¯ Ã— 3ï¼‰
  - ãƒ­ãƒ¼ã‚«ãƒ« `tmp/x-posts-36/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯ç¢ºèªå¾Œã«å‰Šé™¤æ¸ˆã¿

- **ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆå†æ§‹æˆ**ï¼ˆã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼å‘ã‘æœ€é©åŒ–ï¼‰:
  - å‰Šé™¤ã—ãŸã‚¿ãƒ–: æŠ•ç¨¿ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã€2æœˆ14æ—¥ã€2æœˆ15æ—¥ã€2æœˆ16æ—¥ï¼ˆå†—é•·ãªãŸã‚ï¼‰
  - æ–°ã‚¿ãƒ–ã€ŒæŠ•ç¨¿ã‚¿ã‚¹ã‚¯ã€ã‚’ä½œæˆãƒ»å…ˆé ­ã«é…ç½®
  - 36æŠ•ç¨¿ã‚’æ™‚ç³»åˆ—ã‚½ãƒ¼ãƒˆï¼ˆæ—¥ä»˜â†’æŠ•ç¨¿æ™‚é–“é †ï¼‰ã§é…ç½®
  - ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ï¼ˆåˆ—Aï¼‰ã§ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯å®Œäº†è¨˜éŒ²
  - MCP `create_drive_file` ãŒãƒ•ã‚©ãƒ«ãƒ€ä½œæˆéå¯¾å¿œã®ãŸã‚ã€Python + Drive API ç›´æ¥å‘¼ã³å‡ºã—ã§å¯¾å¿œ

**Key decisions:**
1. **Agent Teamæ–¹å¼**: 12ã‚­ãƒ£ãƒ©ã‚’3ãƒãƒƒãƒã«åˆ†å‰²ã—ã¦ä¸¦åˆ—ç”Ÿæˆï¼ˆé€Ÿåº¦ + ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆç®¡ç†ï¼‰
2. **ã‚­ãƒ£ãƒ©è¨­å®šã¯Driveã®mdãƒ•ã‚¡ã‚¤ãƒ«**: `01_ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¨­å®š/` é…ä¸‹ã®9ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›´æ¥å‚ç…§
3. **ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã¯2ã‚¿ãƒ–æ§‹æˆ**: ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼å‘ã‘ï¼ˆæŠ•ç¨¿ã‚¿ã‚¹ã‚¯ï¼‰+ ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ï¼ˆå…¨æŠ•ç¨¿ãƒ‡ãƒ¼ã‚¿ï¼‰
4. **ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å†…å®¹ã¯ç·¨é›†ä¸å¯**: å†æ§‹æˆã¯è¦‹ãŸç›®ã®ã¿ã€æŠ•ç¨¿æœ¬æ–‡ãƒ»CTAãƒ»ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ã¯ãã®ã¾ã¾ç¶­æŒ

**New Resource IDs:**
| Resource | ID |
|----------|-----|
| XæŠ•ç¨¿ç®¡ç†ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆ | `1pWqXHckZWoTuTQ1r1hqnmr57ioo5aQ8ZTSRntzMHJ08` |
| XæŠ•ç¨¿Driveãƒ•ã‚©ãƒ«ãƒ€ | `1tR4IJU3_ROOkNARNh5Jf1MELa14LJTBF` |

### Session: 2026-02-15 â€” å‹•ç”»æŠ•ç¨¿ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚·ãƒ¼ãƒˆä½œæˆ

**Why:** 36æœ¬ã®ç”Ÿæˆæ¸ˆã¿å‹•ç”»ã‚’3æ—¥é–“ï¼ˆ2/15, 2/16, 2/17ï¼‰ã§12ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ Ã— 3ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ï¼ˆYouTube, TikTok, Instagramï¼‰ã«æŠ•ç¨¿ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚productionã‚·ãƒ¼ãƒˆã¯IDãƒ™ãƒ¼ã‚¹ã§æŠ•ç¨¿æ‹…å½“è€…ã«ã¯åˆ†ã‹ã‚Šã¥ã‚‰ã„ãŸã‚ã€å¿…è¦æƒ…å ±ã‚’1ã‚·ãƒ¼ãƒˆã«ã¾ã¨ã‚ãŸæŠ•ç¨¿ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½œæˆã€‚

**What was done:**

- **æŠ•ç¨¿ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚·ãƒ¼ãƒˆä½œæˆ** (`æŠ•ç¨¿ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«_202602`):
  - Drive AI-Influencer ãƒ•ã‚©ãƒ«ãƒ€ç›´ä¸‹ã«æ–°è¦ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆä½œæˆ
  - ID: `1f9cB4EZU2eDsa-ibjyht6FQZkPqiIPgfGgPFYxl6AM4`

- **ãƒ‡ãƒ¼ã‚¿é›†ç´„ï¼ˆ4ã‚½ãƒ¼ã‚¹ã‹ã‚‰èª­ã¿å–ã‚Šå°‚ç”¨ã§å–å¾—ï¼‰**:
  - **productionã‚·ãƒ¼ãƒˆ** (`1fI1s_...SpPg`): account_id, title, final_video_url
  - **ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒª** (`1-m4f5...FHCHA`): character_id â†’ character_name è§£æ±º
  - **ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒª** (`1CmT6...oUE`): persona_name, platform, email, passwordï¼ˆaccounts tabï¼‰+ gmail_password, two_factor_recoveryï¼ˆgmail_credentials tabï¼‰
  - **ç®¡ç†ãƒœãƒ¼ãƒ‰** (`1miRw...zC84`): ACC_0010ã€œACC_0034 ã®ä¸è¶³æƒ…å ±ï¼ˆpersona, email, IG passwordï¼‰ã‚’è£œå®Œ + Gãƒ¡ãƒ¼ãƒ«ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±ã‚¿ãƒ–ã‹ã‚‰gmail_password/2FA

- **ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒãƒƒãƒ”ãƒ³ã‚°ï¼ˆç®¡ç†ãƒœãƒ¼ãƒ‰ â†’ account_idï¼‰**:
  - ACC_0001 â†’ 0xviolet.xyz (TikTok)
  - ACC_0004 â†’ 0xvioletxyz (Instagram)
  - ACC_0007 â†’ tramdestiny_2000 (Instagram)
  - ACC_0010ã€œACC_0034 â†’ ç®¡ç†ãƒœãƒ¼ãƒ‰ rows 10-18ï¼ˆInstagramã€é †åºãƒ™ãƒ¼ã‚¹ã®ãƒãƒƒãƒ”ãƒ³ã‚°ï¼‰

- **ã‚·ãƒ¼ãƒˆæ§‹æˆå¤‰æ›´ã®çµŒç·¯**:
  1. production B,C,E,Såˆ—ã‚’ã‚³ãƒ”ãƒ¼ â†’ character_id â†’ character_name ã«ç½®æ›ãƒ»IDåˆ—å‰Šé™¤
  2. accounts inventory ã‹ã‚‰ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±4åˆ—è¿½åŠ ï¼ˆpersona, platform, email, passwordï¼‰
  3. gmail_password, two_factor_recovery 2åˆ—è¿½åŠ ï¼ˆemail/password ã®æ¨ªã«é…ç½®ï¼‰
  4. ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹åˆ—ï¼ˆæŠ•ç¨¿æ¸ˆã¿ï¼‰ã‚’Aåˆ—ã«è¿½åŠ 
  5. account_id æ˜‡é †ã‚½ãƒ¼ãƒˆï¼ˆACC_0001ã€œACC_0034ï¼‰
  6. å„å‹•ç”»è¡Œã®ä¸‹ã«ç©º2è¡Œè¿½åŠ  â†’ 3ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å±•é–‹ï¼ˆTikTok/Instagram/YouTubeï¼‰
  7. å…¨108è¡Œã«ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹Data Validationé©ç”¨

- **æœ€çµ‚ã‚·ãƒ¼ãƒˆæ§‹æˆ**ï¼ˆ108è¡Œ = 36å‹•ç”» Ã— 3ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã€11åˆ—ï¼‰:

| A | B | C | D | E | F | G | H | I | J | K |
|---|---|---|---|---|---|---|---|---|---|---|
| æŠ•ç¨¿æ¸ˆã¿â˜ | account_id | persona_name | platform | email | password | gmail_password | two_factor_recovery | title | character_name | final_video_url |

**æ®‹èª²é¡Œï¼ˆæœªå¯¾å¿œï¼‰:**
1. **TikTok/YouTubeã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒä¸æ­£ç¢º**: ç¾åœ¨IGãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã„ã‚‹ãŒã€ç®¡ç†ãƒœãƒ¼ãƒ‰ã«ã¯ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ¥ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒå­˜åœ¨ï¼ˆrows 18-27ãŒTikTokç”¨ï¼‰
2. **8æœ¬ã®å‹•ç”»ã«final_video_urlãªã—**: VID_0010, 0025, 0026, 0027, 0028, 0029, 0031, 0032ï¼ˆlipsyncã‚¨ãƒ©ãƒ¼ç­‰ï¼‰â†’ 24è¡ŒãŒå‹•ç”»ãªã—
3. **æŠ•ç¨¿æ—¥ã®åˆ—ãªã—**: 36æœ¬ã‚’3æ—¥é–“ã«ã©ã†å‰²ã‚Šå½“ã¦ã‚‹ã‹æœªæŒ‡å®š
4. **YouTubeã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±ãªã—**: ç®¡ç†ãƒœãƒ¼ãƒ‰ã«YouTubeã®è¡ŒãŒå­˜åœ¨ã—ãªã„
5. **ACC_0001ã®TikTokãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç©º**: ç®¡ç†ãƒœãƒ¼ãƒ‰ãƒ»ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªã©ã¡ã‚‰ã«ã‚‚æœªç™»éŒ²

**Key decisions:**
1. **å…ƒã‚·ãƒ¼ãƒˆå¤‰æ›´ç¦æ­¢**: production, accounts inventory, character inventory, ç®¡ç†ãƒœãƒ¼ãƒ‰å…¨ã¦èª­ã¿å–ã‚Šå°‚ç”¨
2. **1å‹•ç”»3è¡Œå±•é–‹**: å„å‹•ç”»ã‚’3ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ï¼ˆTikTok/Instagram/YouTubeï¼‰åˆ†ã«å±•é–‹ã—ã€æŠ•ç¨¿æ‹…å½“è€…ãŒ1è¡Œãšã¤ãƒã‚§ãƒƒã‚¯ã§ãã‚‹æ§‹æˆ
3. **ACC_0010ã€œACC_0034ã®ãƒãƒƒãƒ”ãƒ³ã‚°**: ç®¡ç†ãƒœãƒ¼ãƒ‰ã®é †åºãƒ™ãƒ¼ã‚¹ã§å‰²ã‚Šå½“ã¦ï¼ˆplatformãŒInstagramã§ä¸€è‡´ã€9ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ=9è¡Œï¼‰

**New Resource IDs:**
| Resource | ID |
|----------|-----|
| æŠ•ç¨¿ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«_202602 | `1f9cB4EZU2eDsa-ibjyht6FQZkPqiIPgfGgPFYxl6AM4` |

### Session: 2026-02-16 â€” XæŠ•ç¨¿è‡ªå‹•åŒ– + YouTube Shortsè‡ªå‹•æŠ•ç¨¿ å®Ÿè£…

**Why:** 36æœ¬ã®XæŠ•ç¨¿ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç”Ÿæˆã¯å®Œäº†ã—ã¦ã„ãŸãŒã€æŠ•ç¨¿è‡ªä½“ã¯æ‰‹å‹•ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€‚4ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ï¼ˆX, YouTube, TikTok, Instagramï¼‰ã®æŠ•ç¨¿è‡ªå‹•åŒ–ãŒå¿…è¦ã€‚ã“ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§ã¯XæŠ•ç¨¿ã¨YouTube ShortsæŠ•ç¨¿ã®2ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’å®Ÿè£…ã€‚

**ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ï¼ˆXãƒ»YouTubeå…±é€šãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰:**
```
[æŠ•ç¨¿ç®¡ç† Spreadsheet]  â†’  [task-manager.js]  â†’  [watch-*.js (PM2)]  â†’  [adapter.js]  â†’  Platform API
                                                        â†‘
                                                [credential-manager.js]
                                                (per-account OAuth tokens)
```

**XæŠ•ç¨¿è‡ªå‹•åŒ–ï¼ˆæ–°è¦å®Ÿè£…ï¼‰:**
- `pipeline/posting/x-credential-manager.js`: per-account OAuth 1.0a tokenç®¡ç†ï¼ˆ`.x-credentials.json`ï¼‰
- `pipeline/sheets/posting-task-manager.js`: XæŠ•ç¨¿ç®¡ç†ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆèª­ã¿æ›¸ãï¼ˆ9åˆ— A-Iï¼‰
  - `CHARACTER_NAME_MAP`: 12ã‚­ãƒ£ãƒ© â†’ ACC_0037ã€œACC_0048ï¼ˆXç”¨ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼‰
  - `parseTimeWindow()` / `isWithinWindow()`: æ™‚é–“çª“åˆ¤å®šï¼ˆã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³å¯¾å¿œï¼‰
  - `buildTweetText()`: æœ¬æ–‡+ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°çµåˆï¼ˆ280æ–‡å­—åˆ¶é™ï¼‰
  - `getReadyPosts()`: æœªæŠ•ç¨¿ + æ—¥ä»˜æ¡ä»¶ + æ™‚é–“çª“ã§æŠ•ç¨¿å¯èƒ½è¡Œã‚’å–å¾—
- `pipeline/posting/adapters/twitter.js`: ãƒãƒ«ãƒã‚¢ã‚«ã‚¦ãƒ³ãƒˆå¯¾å¿œtwitter-api-v2ãƒ©ãƒƒãƒ‘ãƒ¼
  - `postTweet(accountId, text)`: per-accountã®OAuthã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§æŠ•ç¨¿
- `scripts/x-oauth-setup.js`: OAuth 1.0a PIN-basedèªå¯CLI
  - Accounts Inventoryã‹ã‚‰ `platform === 'X'` ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä¸€è¦§ â†’ é¸æŠ â†’ PINèªå¯ â†’ tokenä¿å­˜
- `scripts/watch-posting.js`: PM2æŠ•ç¨¿ãƒ‡ãƒ¼ãƒ¢ãƒ³ï¼ˆ60ç§’ãƒãƒ¼ãƒªãƒ³ã‚°ã€æœ€å¤§3ä»¶/pollï¼‰
  - Rate limitå¯¾å¿œï¼ˆ429â†’å¾…æ©Ÿã€401/403â†’markErrorï¼‰

**YouTube Shortsè‡ªå‹•æŠ•ç¨¿ï¼ˆæ–°è¦å®Ÿè£…ï¼‰:**
- `pipeline/posting/yt-credential-manager.js`: per-account OAuth 2.0 refresh tokenç®¡ç†ï¼ˆ`.yt-credentials.json`ï¼‰
- `pipeline/sheets/yt-posting-task-manager.js`: YTæŠ•ç¨¿ç®¡ç†ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆèª­ã¿æ›¸ãï¼ˆ12åˆ— A-Lï¼‰
  - `YT_CHARACTER_NAME_MAP`: 12ã‚­ãƒ£ãƒ© â†’ ACC_0003ã€œACC_0036ï¼ˆYouTubeç”¨ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼‰
  - æ™‚é–“çª“é–¢æ•°ã¯Xç”¨ `posting-task-manager.js` ã‹ã‚‰ã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼ˆã‚³ãƒ¼ãƒ‰å†åˆ©ç”¨ï¼‰
  - `getReadyPosts()`: æœªæŠ•ç¨¿ + æ—¥ä»˜æ¡ä»¶ + æ™‚é–“çª“ + drive_file_idå¿…é ˆ
- `pipeline/posting/adapters/youtube.js`: ãƒãƒ«ãƒã‚¢ã‚«ã‚¦ãƒ³ãƒˆå¯¾å¿œ + Driveâ†’tmpâ†’upload
  - `uploadShort(accountId, { driveFileId, title, description, tags })`: Drive DL â†’ tmpãƒ•ã‚¡ã‚¤ãƒ« â†’ YouTube upload â†’ cleanup
  - `downloadVideoToTemp(driveFileId)`: Drive API streaming DL â†’ os.tmpdir
  - `upload()`: å¾Œæ–¹äº’æ›ï¼ˆæ—¢å­˜poster.jsç”¨ã€å˜ä¸€config.youtube.refreshTokenä½¿ç”¨ï¼‰
- `scripts/yt-oauth-setup.js`: OAuth 2.0èªå¯CLIï¼ˆlocalhost:3000 callback + `--manual` modeï¼‰
  - `youtube.channels.list({ mine: true })` ã§channelId/channelTitleå–å¾—
- `scripts/watch-yt-posting.js`: PM2æŠ•ç¨¿ãƒ‡ãƒ¼ãƒ¢ãƒ³ï¼ˆ120ç§’ãƒãƒ¼ãƒªãƒ³ã‚°ã€æœ€å¤§2ä»¶/pollï¼‰
  - **æ—¥æ¬¡quotaã‚«ã‚¦ãƒ³ã‚¿**: YT_DAILY_LIMIT=6ï¼ˆ10,000 units / 1,600 per uploadï¼‰
  - quotaExceeded â†’ å½“æ—¥åœæ­¢ã€æ—¥ä»˜å¤‰æ›´ã§ãƒªã‚»ãƒƒãƒˆ

**Configãƒ»ã‚¤ãƒ³ãƒ•ãƒ©å¤‰æ›´:**
- `pipeline/config.js`: youtube ã‚»ã‚¯ã‚·ãƒ§ãƒ³æ‹¡å¼µï¼ˆcredentialsPath, postingSpreadsheetId, postingTabï¼‰ã€x ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¿½åŠ ï¼ˆcredentialsPath, postingSpreadsheetId, postingTabï¼‰
- `ecosystem.config.js`: 3ã¤ã®PM2ã‚¢ãƒ—ãƒªï¼ˆpipeline-watcher, posting-scheduler, yt-posting-schedulerï¼‰
- `.gitignore`: `.x-credentials.json`, `.yt-credentials.json` è¿½åŠ 
- `package.json`: `x:setup`, `x:post`, `yt:setup`, `yt:post` ã‚¹ã‚¯ãƒªãƒ—ãƒˆè¿½åŠ ã€`twitter-api-v2` ä¾å­˜è¿½åŠ 

**æ–°è¦ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆ:**
| Resource | ID |
|----------|-----|
| XæŠ•ç¨¿ç®¡ç† | `1pWqXHckZWoTuTQ1r1hqnmr57ioo5aQ8ZTSRntzMHJ08` (tab: æŠ•ç¨¿ã‚¿ã‚¹ã‚¯) |
| YTæŠ•ç¨¿ç®¡ç† | `1n332Q6LjAl9I4c6y3OwqFiontuum3LbVu9mM1gjxN-0` (tab: YTæŠ•ç¨¿ã‚¿ã‚¹ã‚¯) |

**ãƒ†ã‚¹ãƒˆçµæœ:** 400 tests passing (343 GAS / 10 suites + 57 pipeline / 1 suite)
- æ–°è¦ãƒ†ã‚¹ãƒˆ: Tests 37-55ï¼ˆX: 37-45, YT: 46-55ï¼‰
- Test 35 æ›´æ–°: PM2ã‚¢ãƒ—ãƒªæ•° 2â†’3

**æœªå®Ÿè£…ï¼ˆ4ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å…±é€šã®æ®‹ä½œæ¥­ï¼‰:**
- å„ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®OAuthèªè¨¼æƒ…å ±è¨­å®šï¼ˆ.env + setupå®Ÿè¡Œï¼‰ã¯ã€TikTokãƒ»Instagramã®å®Ÿè£…å®Œäº†å¾Œã«ã¾ã¨ã‚ã¦å®Ÿæ–½äºˆå®š
- TikTokæŠ•ç¨¿è‡ªå‹•åŒ–: Content Posting APIï¼ˆåŒãƒ‘ã‚¿ãƒ¼ãƒ³ã§å®Ÿè£…äºˆå®šï¼‰
- InstagramæŠ•ç¨¿è‡ªå‹•åŒ–: Graph APIï¼ˆåŒãƒ‘ã‚¿ãƒ¼ãƒ³ã§å®Ÿè£…äºˆå®šï¼‰

### 2026-02-16: TikTok + Instagram è‡ªå‹•æŠ•ç¨¿å®Ÿè£…

**æ¦‚è¦:** X + YouTube Shortsã«ç¶šãã€æ®‹ã‚Š2ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ï¼ˆTikTok / Instagramï¼‰ã®è‡ªå‹•æŠ•ç¨¿ã‚³ãƒ¼ãƒ‰å®Ÿè£…ã‚’å®Œäº†ã€‚4ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å…¨ã¦åŒä¸€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ï¼ˆcredential-manager â†’ adapter â†’ task-manager â†’ watcher daemonï¼‰ã€‚npmè¿½åŠ ãªã—ï¼ˆNode.js stdlib `https` ã§å…¨APIé€šä¿¡ï¼‰ã€‚OAuthèªå¯ä½œæ¥­ã¯4ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ä¸€æ‹¬ã§å¾Œæ—¥å®Ÿæ–½ã€‚

**æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ8ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰:**
- `pipeline/posting/tiktok-credential-manager.js`: per-account OAuth2ãƒˆãƒ¼ã‚¯ãƒ³ç®¡ç† + `refreshAccessToken()`ï¼ˆ24æ™‚é–“ã§æœŸé™åˆ‡ã‚Œâ†’è‡ªå‹•æ›´æ–°ï¼‰+ `getValidToken()`
- `pipeline/posting/ig-credential-manager.js`: per-account Facebook OAuthç®¡ç† + `refreshLongLivedToken()`ï¼ˆ60æ—¥æœŸé™ã€æ®‹ã‚Š7æ—¥ã§è‡ªå‹•æ›´æ–°ï¼‰+ `getValidToken()`
- `pipeline/sheets/tiktok-posting-task-manager.js`: TikTokæŠ•ç¨¿ç®¡ç†ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆèª­ã¿æ›¸ãï¼ˆ12åˆ— A-Lï¼‰ã€`TIKTOK_CHARACTER_NAME_MAP`ï¼ˆ12ã‚¨ãƒ³ãƒˆãƒªï¼‰
- `pipeline/sheets/ig-posting-task-manager.js`: IGæŠ•ç¨¿ç®¡ç†ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆèª­ã¿æ›¸ãï¼ˆ11åˆ— A-Kï¼‰ã€`IG_CHARACTER_NAME_MAP`ï¼ˆ12ã‚¨ãƒ³ãƒˆãƒªï¼‰ã€`buildCaption()`
- `scripts/tiktok-oauth-setup.js`: TikTok OAuth 2.0èªå¯CLIï¼ˆlocalhost:3000 callback + `--manual` modeï¼‰
- `scripts/ig-oauth-setup.js`: Facebook/Instagram OAuthèªå¯CLIï¼ˆshortâ†’long-lived tokenäº¤æ›ã€IG Business Accountè‡ªå‹•æ¤œå‡ºï¼‰
- `scripts/watch-tiktok-posting.js`: PM2 TikTokã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ãƒ‡ãƒ¼ãƒ¢ãƒ³ï¼ˆ120ç§’ãƒãƒ¼ãƒªãƒ³ã‚°ã€50/æ—¥åˆ¶é™ï¼‰
- `scripts/watch-ig-posting.js`: PM2 Instagramã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ãƒ‡ãƒ¼ãƒ¢ãƒ³ï¼ˆ120ç§’ãƒãƒ¼ãƒªãƒ³ã‚°ã€25/æ™‚åˆ¶é™ï¼‰

**å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ7ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰:**
- `pipeline/posting/adapters/tiktok.js`: ã‚¹ã‚¿ãƒ–â†’å®Œå…¨å®Ÿè£…ã€‚FILE_UPLOADæ–¹å¼ï¼ˆinit â†’ PUT â†’ status pollï¼‰ã€‚Driveâ†’tmpâ†’TikTokã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
- `pipeline/posting/adapters/instagram.js`: ã‚¹ã‚¿ãƒ–â†’å®Œå…¨å®Ÿè£…ã€‚Reels 2-step uploadã€‚Driveâ†’tmpâ†’fal.storage(å…¬é–‹URL)â†’containerä½œæˆâ†’publish
- `pipeline/config.js`: `tiktok`ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆclientKey, clientSecret, credentialsPath, postingSpreadsheetId, postingTab, baseUrlï¼‰+ `instagram`ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆappId, appSecret, credentialsPath, postingSpreadsheetId, postingTab, graphApiVersionï¼‰è¿½åŠ 
- `ecosystem.config.js`: PM2ã‚¢ãƒ—ãƒª 3â†’5ï¼ˆ`tiktok-posting-scheduler`, `ig-posting-scheduler` è¿½åŠ ï¼‰
- `.gitignore`: `.tiktok-credentials.json`, `.ig-credentials.json` è¿½åŠ 
- `package.json`: `tiktok:setup`, `tiktok:post`, `ig:setup`, `ig:post` ã‚¹ã‚¯ãƒªãƒ—ãƒˆè¿½åŠ 
- `tests/pipeline.test.js`: 20ãƒ†ã‚¹ãƒˆè¿½åŠ ï¼ˆTests 56-75ï¼‰ã€Test 35æ›´æ–°ï¼ˆPM2ã‚¢ãƒ—ãƒªæ•° 3â†’5ï¼‰

**TikTokã‚¢ãƒ€ãƒ—ã‚¿è©³ç´°:**
- `uploadVideo(accountId, { driveFileId, title, privacyLevel })`: ãƒ¡ã‚¤ãƒ³æŠ•ç¨¿é–¢æ•°
  - `getValidToken()` â†’ Drive DL â†’ `POST /v2/post/publish/video/init/` â†’ `PUT upload_url` â†’ `POST /v2/post/publish/status/fetch/`ï¼ˆæœ€å¤§60ç§’ãƒãƒ¼ãƒªãƒ³ã‚°ï¼‰
- æœªå¯©æŸ»ã‚¢ãƒ—ãƒªåˆ¶é™: `SELF_ONLY`ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼ˆã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆåˆ—Kã§ç®¡ç†ã€å¯©æŸ»é€šéå¾Œã«`PUBLIC_TO_EVERYONE`ã«å¤‰æ›´å¯èƒ½ï¼‰
- `downloadVideoToTemp(driveFileId)`: Drive API streaming DL â†’ os.tmpdir

**Instagramã‚¢ãƒ€ãƒ—ã‚¿è©³ç´°:**
- `uploadReel(accountId, { driveFileId, caption })`: ãƒ¡ã‚¤ãƒ³æŠ•ç¨¿é–¢æ•°
  - `getValidToken()` â†’ Drive DL â†’ `uploadToFalStorage`(fal-client.js) â†’ `POST /{igUserId}/media` â†’ status pollï¼ˆæœ€å¤§120ç§’ï¼‰ â†’ `POST /{igUserId}/media_publish`
- å…¬é–‹URLå•é¡Œã®è§£æ±º: Driveç›´æ¥å…±æœ‰ã§ã¯ãªã`uploadToFalStorage`çµŒç”±ã§ä¸€æ™‚å…¬é–‹URLã‚’ç”Ÿæˆ
- `downloadVideoToTemp(driveFileId)`: Drive API streaming DL â†’ os.tmpdir

**æ–°è¦ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆ:**
| Resource | ID |
|----------|-----|
| TikTokæŠ•ç¨¿ç®¡ç† | `1ZSrjY0Ty5yDMoyNYNAO2HHWl121R8Po3qI4o9DVnByQ` (tab: TikTokæŠ•ç¨¿ã‚¿ã‚¹ã‚¯, 12åˆ—) |
| IGæŠ•ç¨¿ç®¡ç† | `1cgf2viMY_cjxu4qrL2lwMmR_kBRQUGy8yQxsQYG3xFs` (tab: IGæŠ•ç¨¿ã‚¿ã‚¹ã‚¯, 11åˆ—) |

**ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå¯¾å¿œ:**
| Platform | Accounts (12 chars each) |
|----------|--------------------------|
| TikTok | ACC_0001, ACC_0005, ACC_0008, ACC_0011, ACC_0014, ACC_0017, ACC_0020, ACC_0023, ACC_0026, ACC_0029, ACC_0032, ACC_0035 |
| Instagram | ACC_0002, ACC_0004, ACC_0007, ACC_0010, ACC_0013, ACC_0016, ACC_0019, ACC_0022, ACC_0025, ACC_0028, ACC_0031, ACC_0034 |

**ãƒ†ã‚¹ãƒˆçµæœ:** 420 tests passing (343 GAS / 10 suites + 77 pipeline / 1 suite)
- æ–°è¦ãƒ†ã‚¹ãƒˆ: Tests 56-75ï¼ˆTikTok: 56-65, Instagram: 66-75ï¼‰
- Test 35 æ›´æ–°: PM2ã‚¢ãƒ—ãƒªæ•° 3â†’5

**æ®‹ä½œæ¥­:**
- **OAuthèªå¯è¨­å®šã®ã¿**: 4ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ï¼ˆXãƒ»YouTubeãƒ»TikTokãƒ»Instagramï¼‰ã¾ã¨ã‚ã¦OAuthèªå¯ä½œæ¥­ã‚’å®Ÿæ–½äºˆå®š
  - `npm run tiktok:setup` / `npm run ig:setup` ã§å„ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’èªå¯
  - TikTok: TIKTOK_CLIENT_KEY + TIKTOK_CLIENT_SECRET ã‚’.envã«è¨­å®š
  - Instagram: IG_APP_ID + IG_APP_SECRET ã‚’.envã«è¨­å®š

### Sensitive Data Locations (NOT in git)
- `.clasp.json` - clasp config with Script ID
- `.gsheets_token.json` - OAuth token for Sheets/Drive API
- `video_analytics_hub_*oauth*.json` - OAuth client credentials
- `client_secret_*.json` - Google Cloud client secrets
- `.mcp.json` - MCP server config with OAuth credentials
- `.x-credentials.json` - X/Twitter per-account OAuth 1.0a tokens
- `.yt-credentials.json` - YouTube per-account OAuth 2.0 refresh tokens
- `.tiktok-credentials.json` - TikTok per-account OAuth 2.0 tokens
- `.ig-credentials.json` - Instagram per-account long-lived tokens
- `_config` sheet in spreadsheet - contains OpenAI API key
